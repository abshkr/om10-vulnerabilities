This file is to be used to track all changes for a release.
These should be fixes specific to the Omega 5000 back end and associated processes.
Keep the history between versions, just append to it.
Ensure you add enough detail to explain the fix, however a full detailed
explanation should be in Bugzilla. All entries here should have a Bugzilla ID.
E.g:



********************************************************************************************************************** 
Version: 9.08.11.05
Tag: Omega-9-08-11-05-BRANCH-UTF8-08
Date Tagged:[06/06/2018]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[06/06/2018]
********************************************************************************************************************** 

This tag should include all the featues in TRNSPRT_DOC. It can work on either GB2312 or UTF8 based database



********************************************************************************************************************** 
Version: 9.08.11.04
Tag: Omega-9-08-11-04-BRANCH-UTF8-07
Date Tagged:[30/05/2018]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[30/05/2018]
********************************************************************************************************************** 

BZ: [OM5K-4384] In Folio Summary -> Tank list, the change of Temp or Density did not trigger the quantioty calculation
Solution: If either temperature or density cell is changed, 
1. system will find the quantity cell changed at last, and use it as the source of quantity for calculation.
2. system will use Ambient qty cell as the source when none of amb/cor/kg cell was operated.

	
BZ: [OM5K-4378] Close First Frozen Folio button on Folio Scheduling screen does not check the Folio status and always performed its action when there is actually no Frozen Folio.
Solution: Find out if there is any frozen folio after the button 'Close 1st Frozen Folio' is clicked, and display warning message if no result is found.

BZ: [OM5K-4367] In Host Messaging Interface, adjust the column widths in data grids.

BZ: [OM5K-4366] Frontend should show the Planned Qty as well as the Available to be scheduled Qty. [Nomination Movement screen]
Solution:
Since manual transaction is now made from Nomination Item directly, the quanty of Scheduled and Moved will be always equal. System will display ambient available quantity beside the Planned Qty.
	
BZ: [OM5K-4365] The Arm for Transfer is not in use, it should be grayed out. 
Solution:
1. when it is Transfer type, arm field is disabled
2. when it is Receipt type, the whole From block is disabled including arm field
3. when it is Disposal type, arm field is disabled if tank is selected; enabled if tank not selected.

BZ: [OM5K-4363] The base product list should not be grayed out and also should show entered data.
This bug was caused by trying to do manual transaction on a nomination created from Special Movement screen. For a nomination created successfully by the Special Movement process, its status should be Fully Moved and should not be allowed to do manual transaction any more, BUT due to the bugs existed in special movement back-end functions, the creation of the nomination obviously was not ended properly and the nomination item had TANK defined already. When user entered MT screen from this nomination item, because the tank was available already, system would treat it as tank-based operation and disable the arm list and base products&meter grid. 
For the manual transaction on a normal Disposal type nomination, this bug should never happen, because tank was not defined and user could select the arm. 
Note: The grid of Base Products and Meters are related to arm loading only, and will be disabled if operation is tank-based.
No fix is required.

BZ: [OM5K-4344] Create PDS File button should not be available (clickable) when the folio status is Closed.
Solution: Find out if there is any open folios after the button 'Create PDS File' is clicked, and display warning message if no result is found.
Note: PDS can be done for OPEN folio only.
	
BZ: [OM5K-4311] The field features in Manual Transactions for nomination items screen are vague.
Similar to [OM5K-4365]
Solution:
1. when it is Transfer type, arm field is disabled
2. when it is Receipt type, the whole From block is disabled including arm field
3. when it is Disposal type, arm field is disabled if tank is selected; enabled if tank not selected.

	


********************************************************************************************************************** 
Version: 9.08.11.03
Tag: Omega-9-08-11-03-BRANCH-UTF8-06
Date Tagged:[23/05/2018]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[23/05/2018]
********************************************************************************************************************** 

BZ: [OM5K-4344] Create PDS File button should not be available (clickable) when the folio status is Closed.
Solution: Find out if there is any open or frozen folios after the button 'Create PDS File' is clicked, and display warning message if no result is found.
	
BZ: [OM5K-4342] The titles are inconsistent expressed in Meters and Tanks sections.
Solution: In Folio Management screen, use the titles similar to transactions: Closing Amb (L), Closing Std (L), Closing Mass (KG), Closing Temp (C), and Density (kg/m3)

BZ: [OM5K-4336] The Calc button worked once only and never work again, but Update Tanks button never work for updating. 
Solution:
Regarding Calc button:
	1. create a global function to decide the quantity type (LT, L15, KG) and value for the quantity calculation, which is used by the screen of Special Movement, Nomination Manual Transaction, and Folio Management
	2. the button 'Calc' under the Meters/Tanks list will be enabled only when it is in TANKS tab and one record is clicked.
	3. the button 'Calc' in the form Edit Tanks will be available if the following fields have values:
		a. Obs Temperature field
		b. Sat least one of Obs Qty, Std Qty, Mass fields, or any two fields, or all fields
		Note: Std Density field is allowed to be blank, and will be populated with existing density from the grid record when starting calculation.
	4. When user changes the value of Obs Qty, Std Qty, or Mass fields, system will record the time of change.
	5. When button 'Calc' is clicked, system will find the field which has the valid value and is changed last, then use this field as the source of quantity to calculate other two quantities.
Regarding Update Tanks button:
	1. Click it the system will go through all tank records, and will display 'Tank data not changed! (Note: Need do calculation if ambient quantity is changed)' if no tank data is changed. 
	Please note: Since ambient quantity is not a member of closeout tank table columns, it is an pure temporary variable for the calculation of cor and mass qty, therefore the change of this cell will not be considered as DADA CHANGE if no calculation is done.
	2. If any of tank data changed, system will display a pop up dialog which lists all the records with 
	the format like:
	T01, Tank data not changed! Tank code: T01
	T02, Tank data have been changed! Tank code: T02

BZ: [OM5K-4331] When opening Nomination or Special Movements screen, clicking the record in grid will find some dropdown list not ready yet in the form.
Solution: Enable data grid and the Clear/Schedules/Create buttons when data is ready to export to CSV (Export Data button enabled), because that should be the moment when everything loaded in GUI.
	
BZ: [OM5K-4327] The front-end might need to provide warning message and reject the request when there are no any frozen Folios. 
Solution: Find out if there is any frozen folio after the button 'Close 1st Frozen Folio' is clicked, and display warning message if no result is found.

BZ: [OM5K-4326] The Plant code's length is 4, but the front-end allows the user to put more than 4 digits which has the potential to cause some issues 
Solution: The only place to create or update the plant code is in the screen Companies when the company is a SUPPLIER, so we have to limit its length there by adding the following line: 
			$str .= "|plant_code,alphanumeric,4";
	in /var/www/htdocs/amfservices/core/services/ScreenFormColumnService.php:
		if ( $screen == "COMPANIES" )
		{
			//$str .= "|cmpy_codeTextInput,document,16";
			$str .= "|cmpy_nameTextInput,document,300";
			$str .= "|plant_code,alphanumeric,4";
		}

BZ: [OM5K-4321] Improve the data transfer speed by data compression/decompression
1. Create a global function to uncompress the data from back-end service 
2. In screens using AMF data services, decompress the text before deJSON.
3. In the following files, compress&encode the JSONed data before sending back to front-end. A flag is used to turn on or off the data compression.
.../amfservices/core/collections/dmManualTransactions.php (flag: $zip_on)
.../amfservices/core/collections/dmManualTransactionsData.php (flag: $zip_on)
.../amfservices/core/collections/dmMovementReasons.php (flag: $zip_on)
.../amfservices/core/collections/dmMovements.php (flag: $zip_on)
.../amfservices/core/collections/dmMovementSchedules.php (flag: $zip_on)
.../amfservices/core/collections/dmSpecialMovements.php (flag: $zip_on)
.../amfservices/core/services/DB.class.php (flag: $data->zip_on) 

BZ: [OM5K-4318] Nomination movements schedule default the Trip Status as ACTIVE which is not convenient.
Solution: When entering Nomination Schedule screen from Nomination screen, do not filter by status any more.

BZ: [OM5K-4317] The Effective from and Expired after are blank in Movement Nominations screen.
The nomination with the type of 'Local Special Movement' is created, scheduled, fully moved instantly when a special movement is submitted in screen Special Movements, so it should be OK if 'Effective from' and 'Expiry after' Date are left blank. 
Front end is changed to display blank too if no values are for these two fields.

BZ: [OM5K-4312] On Special Movements and Nomination Manual Transaction screen, the unit for the blank Alternate Qty should be blank and read only if the Alternate Qty is not in use. (Unless business requirement is applied) 
Solution:  In both Nomination Manual Transactions and Special Movements screen, clear the unit and disable it if AltQty is blank, and enable it and select the 1st option if user enter non-space characters in AltQty and unit is not selected.

BZ: [OM5K-4307] Please remove the compulsory requirement for the field Priority, unless it is required from business purpose
Solution: remove the compulsory requirement from both Shift and Priority

BZ: [OM5K-4306] Could not reproduce the bug after trying both locking/unlocking nomination product item and reversing a schedule for a nomination. This bug might have disappeared due to the fix in [OM5K-4331] 

BZ: [OM5K-4303] For Nominations, especially the normal Nomination movements, the Vehicle should not be compulsory fields since they can be rail and barge/jetty loading. 
Solution: This is the defect in Dropdown List Validator. When it is not compulsory and no option is selected, do not do any validation.
	
BZ: [OM5K-4302] The Calculate button on Special Movements and Nomination Manual Transaction screen cannot be clickable if the user want to change the temp or Obs Qty. 
Solution: On both Special Movements and Nomination Manual Transaction screens
1. The button Calculate will be available if the following fields have values:
	a. Obs Temperature field
	b. Std Density field
	c. at least one of Obs Qty, Std Qty, Mass fields, or any two fields, or all fields
2. When user changes the value of Obs Qty, Std Qty, or Mass fields, system will record the time of change.
3. When button Calculate is clicked, system will find the field which has the valid value and is changed last, then use this field as the source of quantity to calculate other two quantities.
	
BZ: [OM5K-4301] Remove "Load from Nomination" option from the Manual Transaction Type list in Manual Transaction screen. 

BZ: [OM5K-4281] Auto Filter and Date Range Filter are combined together and all applied to all the screens that is not convenient for any screens without large records. 
Solution: Take the configuration 'SITE_AUTO_FILTER_WHEN_OPEN_SCREEN' away from the feature 'DATE_RANGE_FILTER', and create a new feature 'AUTO_FILTER_WHEN_OPEN_SCREEN' to manage it.
The following is the new setting in the file '/var/www/htdocs/amfservices/core/services/FeatureSettings.json'.
{
	"feature_code": "AUTO_FILTER_WHEN_OPEN_SCREEN",
	"feature_name": "Start filtering automatically when screen opens",
	"feature_flag": "Y",
	"feature_gui": "Y",
	"feature_func": "ManageAutoFilter"
}
When this feature is off, user has to start the filtering manually after screen opened, otherwise always auto filtering when screen opens.

BZ: [OM5K-4272] In the screen 'Special Movements',
1. Prompt "Please select all fields in block 'From': Plant-Supplier, Tank, and Product." if any of three fields are not selected when submitting a special movement of 'Disposal' or 'Transfer' type.
2. Prompt "Please select all fields in block 'To': Plant-Supplier, Tank, and Product." if any of three fields are not selected when submitting a special movement of 'Receipt' or 'Transfer' type.
3. Use Bordercontainer to frame 'From' and 'To' blocks.

BZ: [OM5K-4271] Cannot show the entered special movements appropriately that they are disappeared if parts of compulsory fields were saved as empty 
BZ: [OM5K-4270] No warning messages and validation for creating a new special movement. 
Solution:
1. When date range us changed, get the records within the range and clean all filters.
2. If any filter is changed, system does not reload the data but just filters the existing records which was retrieved in step 1.
3. If the button 'Clear' is clicked, all filters except 'Date Ranges' will be cleared, user will see the same results as in step 1. 
4. When a new record is created by either 'Save' or 'Submit' action, the mov_num of the record will appear in the filter 'Movement Number' and the records will be filtered on the 'Movement Number'. As the result, user will see this record only. 'Movement Status' will be either 'Entering' or 'Completed'.
5. When an existing record (saved before) is updated, the mov_num of the record will appear in the filter 'Movement Number' and the records will be filtered on the 'Movement Number'. As the result, user will see this record only. 'Movement Status' will be still 'Entering'.
6. When an existing record (saved/updated before) is submitted, the mov_num of the record will appear in the filter 'Movement Number' and the records will be filtered on the 'Movement Number'. As the result, user will see this record only. 'Movement Status' will be 'Completed'.
7. When a submitted record is reversed, the mov_num of the record will appear in the filter 'Movement Number' and the records will be filtered on the 'Movement Number'. As the result, user will see this record only. 'Movement Status' will be 'Reversed'.


BZ: [OM5K-4267] Movement Nominations screen requires To Plant as compulsory fields to be filled until the user selected To Supplier the field becomes optional field.
The following improvements are made in Nomination Items datagrid:
	1. in EDIT mode, if nomination type is not selected, all '*' will disappear, and error msg box will pop up if trying to update.
	2. in EDIT mode, when nomination type is changed, sign '*' will appear in:
		a. type = 0, Receipt, plant to, supplier to, product to
		b. type = 1, Disposal, plant from, supplier from, product from
		c. type = 2, Transfer, plant/supplier/product from/to
		d. type = '', None of fields
	3. in EDIT mode, when product is not selected, system will select 'l(amb)' as default
	4. in EDIT mode, when field with '*' gets a value selected, it displays the value; when the selected option is unselected, sign '*' will be displayed. When trying to update, error msg box will popup.
	5. in EDIT mode, when user selects to exit the EDIT mode (goes to either DELETE mode or BLANK mode), the updated row will be back to original values.
Also, when validating the grid cells, it is not suitable if still using pop up warning message on the top, because user could see multiple panes with same titles in random sequence which would be very confusing. Therefore a grid list is used here:
---------------------------------
    Field       |    Error      |
---------------------------------
Line N: Title   |  Description  |
---------------------------------

BZ: [OM5K-4266] Warning messages enhancements - the warning messages should be consistent with other front-end screens which requires compulsory fields at once. 
Solution: when validating the grid cells, it is not suitable if still using pop up warning message on the top, because user could see multiple panes with same titles in random sequence which would be very confusing. Therefore a multi-line grid list is used here:
---------------------------------
    Field       |    Error      |
---------------------------------
Line N: Title   |  Description  |
---------------------------------


BZ: [OM5K-4097] The Partner type is hard-coded in PHP, needs to be fixed. 
Solution:
1. add enum PARTNER_TYPES (db patch required, use file amfservices/core/services/add_enums_partner_types.sql).
2. replace the hard-code enums with the list retrieved from VIEW PARTNER_TYPES.




********************************************************************************************************************** 
Version: 9.08.11.02
Tag: Omega-9-08-11-02-BRANCH-UTF8-05-RC
Date Tagged:[03/05/2018]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[03/05/2018]
********************************************************************************************************************** 

BZ: [OM5K-4213] Import data issue 1: csv file cannot fully store the digital number when 0 at the first
If editing CSV file with Excel, Excel will wipe the ZEROs. Please edit CSV file with text editor such as Notepad ++. 
No fix is needed.


BZ: [OM5K-4226] Display "No Results Found" when a search returns no results
1. For all screens having Progress Bar under the Main List, display "No Results Found" on the bar when a search returns no results. The following are those screens:
	Partner Chooser (Popup from Load Schedules and Order Listing screens)
	Delivery Details (Popup from Load Schedules and Order Listing screens)
	Ddd Additional Info (Popup from Delivery Details screen from Load Schedules and Order Listing screens)
	Ddi Additional Info (Popup from Delivery Details screen from Load Schedules and Order Listing screens)
	Dor History (Popup from Load Schedules)
	Expiry Date Details (Popup from screen Tanker List, Equipment List, Personnel)
	Gantry > Allocations > Allocation Periods
	Gantry > Allocations
	Gantry > Base Products
	Gantry > Companies > Company Relations
	Gantry > Drawer Products
	Gantry > Drawer Products > Generic Products
	Gantry > Drawer Products > Dangerous Goods
	Gantry > Product Groups
	Gantry > Product Groups > Compliance Message Groups
	Gantry > Product Groups > Compliance Messages
	Gantry > HazChem
	Gantry > Load Meters
	Gantry > Tank Configuration
	Gantry > Tank Group
	Reports > Report Configurations
	Reports > Report Profiles
	Reports > Auditing
	Access Control > Gate Permissions
	Access Control > Generic Expiry Dates
	Access Control > Legacy Expiry Dates
	Access Control > Site Access Devices
	Customers > Addresses
	Customers > Customer Categories
	Customers > Customers
	Customers > Delivery Locations
	Customers > Order Listing
	Customers > Order Listing > Order Period
	Customers > Partners
	Customers > Partnership
	Printer Configuration > Logical Printers
	Printer Configuration > Physical Printers
	Stock Management > Tank Status
	Stock Management > Tank Status > Tank Straps
	Operations > Drawer Product Assets
	
2. In the screen "On Demand Reports", show "No Results Found" in top right corner of the box "Closeout Details" if found nothing in a search.
3. In the following screens, change the Progress Bar to display "No Results Found" on the bar when a search returns no results:
	Schedules > Load Schedules
	Schedules > Transaction List
4. In screen "Reports > Folio Summary", add the Progress Bar to display "No Results Found" on the bar when a search returns no results.
5. In screen "Stock Reconciliation > Movement Nominations", add the Progress Bar to display "No Results Found" on the bar when a search returns no results.
6. In screen "Reports > Host Messaging Interface", display "No Results Found" at the bottom right corner of screen if total records is ZERO.
7. In screen "Stock Reconciliation > Special Movements", change the Progress Bar to display "No Results Found!   Records shown:0   Records loaded:xyz   Total records:xyz" on the bar when a search returns no results;
"Records shown:xyz   Records loaded:xyz   Total records:xyz" when results found.
8. In screen "Reports > Journal", change the Progress Bar to display "No Results Found!   Records shown:0   Records loaded:xyz   Records found:xyz" on the bar when a search returns no results; "Records shown:0   Records loaded:xyz   Records found:xyz" when results found.
	
	
BZ: [OM5K-4228] Delivery Details information missing on manual transactions screen
1.	For a Schedule by Compartment, the Ship To, Sold To, Delv No are at Compartment level
When doing Manual Transaction for this trip, these three fields will be at Compartment level too and not editable.
2.	For a Schedule by Product, the Ship To, Sold To, Delv No are in Schedule level
When doing Manual Transaction for this trip, these three fields will be at Schedule level too and not editable.
3.	For an Open Order, the Ship To, Sold To are at Order level, no Delv No.
When doing Manual Transaction for this order, Ship To and Sold To fields will be at Order level too and not editable, but Delv No will be at Compartment level and editable. The values of Delv No can be saved temporatorily and loaded later. 

	
BZ: [OM5K-4253] Sound the alarm if count of warnings in Status Bar is greater than ZERO
1. After the user login, he/she will see an icon 'Sound Off' at right end of the status bar, beside 'Warning 0'.
2. By clicking the icon, the icon image can change between 'Sound On' and 'Sound Off'.
3. When it is 'Sound Off', no sound will be played even if there were warnings.
4. When there were warnings, sound will be played if 'Sound On', and will be stopped if 'Sound On' clicked and turned into 'Sound Off'.
5. When the count of warnings back to ZERO, the sound will stop.
	
BZ: [OM5K-4254] Display 'Update successful' or failed warning message after clicking SAVE button on Features Management screen. 

BZ: [OM5K-4255] In popup screen 'Features Management', add two new buttons 'Select All' and 'Deselect All' which will have the following logic:
1. both buttons will be enabled if some features are enabled and others are disabled.
2. button 'Select All' will be enabled if all features are disabled.
3. button 'Deselect All' will be enabled if all features are enabled.
4. the status of both buttons will be adjusted every time when any feature is on or off.
	
BZ: [OM5K-4256] Data are all disappeared after turned off all the features configuration as NO. 
If the feature 'Date Range Filter' is off, the site configuration 'Auto Filtering When Screen Open' will be off too, otherwise, system will try to get all the data back from DB, which will be a big problem if data is huge. However, by clicking 'Apply Filters' on those screens, system will start to get the data and populate the grid based on values in filters.
Turn the feature 'Date Range Filter' on, the 'Auto Filtering when Screen open' will be on too, and the system will start filtering and loading data when screen opens.
No Fix is required.

BZ: [OM5K-4258] nomination - manual transaction function does not work
Solution: Fixed the conflicts caused by including two PHP files with same functions but in different folders in dmpOracle.php


BZ: [OM5K-4262] In the screen "On Demand Reports", the change of date range will trigger the filtering action. The results will appear in the box "Closeout Details" below the "Date Range" box if found any, otherwise, show "No Results Found" in top right corner of the box "Closeout Details".

BZ: [OM5K-4263] Schedule for nominations screen responded too slow after clicking Save on the Schedules for nominations screen. 
Analysis: Regarding the screen Nomination Schedule, the logic has been changed a few times:
1.	At first, we had a button ¡®Make Schedule¡¯ in Nomination Item Form, by clicking it there would be popup screen to allow user to enter tanker/driver and then a schedule will be created, after which the schedule screen will be opened and user can modify, delete¡­.
2.	Later, not sure from ourselves or customers, we decided to make a Nomination Manual Transaction screen, in which, if submitted, a nomination schedule and its transaction details will be all created in one step, and the Status of Schedule will be always Ended or Delivered OK.
3.	There is a flag isTripEditable in this screen to control the visibility of some buttons. 
Solution: Because the Nomination Schedule screen is view only now, hide the button 'Save' and any other buttons for creating, updating or deleting.
	
BZ: [OM5K-4264] Clear button is actually working as cancel the screen (Schedule for nominations screen -> Create -> Load Report)
Solution: Disable the toobar when a schedule is selected and schedule details form opens. 

BZ: [OM5K-4265] A Plus button or title is missing on the schedules for nominations screen	
Solution: Because the Nomination Schedule screen is view only now, hide the button '+', the blank column and any other buttons for creating, updating or deleting items.



	
********************************************************************************************************************** 
Version: 9.08.11.01
Tag: Omega-9-08-11-01-BRANCH-UTF8-04-RC
Date Tagged:[20/04/2018]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[20/04/2018]
********************************************************************************************************************** 

BZ: [OM5K-4200] Add a Color Chooser component in Base Products screen. The user can edit the color of Base Product which will be used to show the product level in TankView module. [need DB patch]
1. On 'Base Products' screen, add column 'Base Product Color' to Grid
2. On 'Base Products' screen, add field 'Base Product Color' to Form
3. The following configuration can be used to show or hide the column 'Base Product Color' in Grid
	in /var/www/htdocs/amfservices/core/services/ScreenGridColumnService.php:
		if ( $screen == "BASE_PRODUCTS" )
		{
			...
			// need turn on when color is enabled
			$str .= "|1,base_color";
		}
4. The following configuration can be used to show or hide the field 'Base Product Color' in Form
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "BASE_PRODUCTS" )
		{
			...
			// need turn on when color is enabled
			$str .= "|fld__base_color,1";
		}
5. A Color Chooser Component is designed in this screen: A text field + a dropdown list.
Click dropdown button will popup a color palette, click it will select a color and close the dropwdown, then selected color will appear in the text field. User can change the value in text field directly and color in dropdown box will change. Color value will be validated and the format is #NNNNNN, N:0-9,A-F or a-f, hexdecimal

BZ: [OM5K-4204] Add fields for HH/H/L/LL/UserH/UserL levels in tank status screen [need GB patch]
1. On 'Tank Status' screen, add columns of Tank Status, Tank Alarm Levels and Level Alarm States to Grid
2. On 'Tank Status' screen, add fields of Tank Status, Tank Alarm Levels and Level Alarm States to Form
3. The following configuration can be used to show or hide these columns in Grid
	in /var/www/htdocs/amfservices/core/services/ScreenGridColumnService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			// need tutn on when status and level alarms management is enabled
			$str .= "|1,tank_status";
			$str .= "|1,tank_status_name";
			$str .= "|1,tank_hh_level";
			$str .= "|1,tank_h_level";
			$str .= "|1,tank_l_level";
			$str .= "|1,tank_ll_level";
			$str .= "|1,tank_uh_level";
			$str .= "|1,tank_ul_level";
			$str .= "|1,tank_hh_state";
			$str .= "|1,tank_h_state";
			$str .= "|1,tank_l_state";
			$str .= "|1,tank_ll_state";
			$str .= "|1,tank_uh_state";
			$str .= "|1,tank_ul_state";			
		}
4. The following configuration can be used to show or hide these fields in Form
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			// need tutn on when status and level alarms management is enabled
			$str .= "|fld__tank_status,1";
			$str .= "|fld__tank_levels_states,1";
			$str .= "|fld__tank_hh_level,1";
			$str .= "|fld__tank_h_level,1";
			$str .= "|fld__tank_l_level,1";
			$str .= "|fld__tank_ll_level,1";
			$str .= "|fld__tank_uh_level,1";
			$str .= "|fld__tank_ul_level,1";
		}
5. When the column/field of HH/H/L/LL/UserH/UserL have the values, system will compare them with the product level, and set the alarm (red light, value 1) if product level >= HH/H/UserH or <=L/LL/UserL, otherwise alarm will be off (green light, value 0). If the value of any HH/H/L/LL/UserH/UserL is blank, no light icon.
6. Whenever the values of HH/H/L/LL/UserH/UserL are changed, alarm states will be adjusted and light icons will be changed.
7. System will make sure HH>H>L>LL and UserH > UserL before changes are submited.

BZ: [OM5K-4246] Transaction list screen starts filtering automatically even when auto-filter configuration is off
Solution: 
1. If SITE_AUTO_FILTER_WHEN_OPEN_SCREEN='N' in SITE_CONFIG, the screen shows no records and no filtering
2. If SITE_AUTO_FILTER_WHEN_OPEN_SCREEN='Y' in SITE_CONFIG, the screen starts filtering automatically when it is opened.


BZ: [OM5K-4181] Omega 5000 site configuration improvement (Frontend)
Solution:
1. Add a button 'Features' in screen 'Role Access Management' (Access Control module). This button is visible only to the user '9999'.
2. The data service is defined in file '/var/www/htdocs/amfservices/core/services/FeatureConfigService.php'.
3. Cick the button 'Features', the screen 'Features Management' will pop up, and the system will call the service 'FeatureConfigService.getFeatureConfiguration' to retrieve the feature settings and display them in the grid.
4. The feature settings are defined in the file '/var/www/htdocs/amfservices/core/services/FeatureSettings.json'. The format of the each feature setting will look like as follows:
	"feature_code": "BASE_PROD__DENS_RANGE",
	"feature_name": "Base Product: Density Range",
	"feature_flag": "Y",
	"feature_gui": "Y",
	"feature_func": "ManageBaseProductDensityRange"
where feature_code, feature_name, feature_flag will be showed in grid, the feature_func is the actual function to perform the change of feature configuration.
5. User click any cell under column 'Flag', and click it again, a toggle component will appear in the cell, with which the flag value can be changed.
6. After changing the feature flag(s), user click button 'Save', and the system will call the service 'FeatureConfigService.putFeatureConfiguration' which will:
	a. Save all the changes to the file '/var/www/htdocs/amfservices/core/services/FeatureSettings.json'.
	b. Go through the list of feature settings, perform its 'feature_func'.
	c. Reload the site configurastions
7. Most of feature changes will be effective immediately, except those with "effective after re-login" in column 'Description'. The following explains which screen will be affected by these feature settings:
	a. Base Product: Density Range
		screen Base Products, both grid columns and form fields
	b. DCS (2nd Drawer)
		screen Drawer Products, both grid columns and form fields
	c. Hot Product (Bitumen)
		screen Base Products and Drawer Products, both grid columns and form fields
	d. API
		screen Tank Status, Transaction List, Transaction Popup, both grid columns and form fields
	e. Tank Strapping
		screen Tank Status, form button 'Tank Strapping' and 'Calculate Quantity by Level'
	f. Dangerous Goods
		screen Drawer Products, form field and button for DG
	g. Company Relations
	    screen Companies, form button 'Company Relations'
	h. Auditing (effective after re-login)
		screen Auditing (on/off)
	i. Customized Expiry Dates
		screen Expiry Dates, switch between legacy mode and generic mode
		screen Tanker List, Equipment List, Personnel List, switch between 3 expiry date fields and more fields managed by popup screen
	j. Partners and Partnership (effective after re-login)",
		screen Partners and Partnership (on/off)
		screen Load Schedules and Order listing, the button which can popup a partner list (on/off)
	k. Preset Data Range to Filter
		screen Allocations, Load Schedules, Order Listing, Live Journal, Auditing, Transaction List
		if date range is blank, no auto-filtering, otherwise filter by the default date range
	l. Tank Level Alarms
		screen Tank Status, both grid columns and form fields
	m. Additional Host Data
		screen Load Schedules, both grid columns and form fields/buttons
	n. Make Manual Transaction
		screen Load Schedules and Order Listing, form button to Make Transaction
	o. View Delivery Details
		screen Load Schedules and Order Listing, form button to View Delivery Details





********************************************************************************************************************** 
Version: 9.08.10.01
Tag: Omega-9-08-10-01-BRANCH-UTF8-03-RC
Date Tagged:[27/03/2018]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[27/03/2018]
********************************************************************************************************************** 


BZ: [OM5K-4146] New Fields for Delivery Details Message screen (DB patch required)
1. Add new fields in Grid and Form for new table columns DD_CUSTOM_CODE, DD_LPG_DEST_TYPE, DD_PERMIT_NUM, DD_SELL_CMPY_CODE in DELV_DETAILS. User can view, add, modify, delete contents from these fields
2. Add a new popup screen 'Delivery Details Item Additional Info' which can be accessed from a particular item in Delivery Details Item list. User can view, add, modify, delete, delete all records from table DELV_DETAILS_ITEM_ADDL_INFO in this new popup screen.
3. Add a new popup screen 'Delivery Details DN Additional Info' which can be accessed from a particular DN in  Delivery Details DN Template list. User can view, add, modify, delete, delete all records from table DELV_DETAILS_DN_ADDL_INFO in this new popup screen.
4. When user tries to remove any Delivery Details Item or Delivery Details DN Template which has the children of Additional Info, system will give the warning. User must remove addition info first.



Known issues:
BZ: In screen "Load Schedules", disable the grid list when filtering by Open Order number.

BZ: Define a new enum type 'LOCALE_LANGUAGES' to store the locale language list, and add a column ENUM_CODE in table ENUMITEM to serve the enum list which use code as the key. This change will affect the Compliance Message and Transportation Document Template screen. (DB patch required)

BZ: Convert the message returned from CGI to proper encoding based on both DB instance encoding type and message contents' encoding. It will affects the DB actions in Tank Configuration, Allocations, and Allocation Periods.

BZ: In screen of Transaction List and Transaction Popup, make the visibility of fields of trsf_api, trsf_temp_f, TRSB_API, TRSB_TMP_F configurable. The following configuration can be used to show or hide these  columns in Grid
	in /var/www/htdocs/amfservices/core/services/ScreenGridColumnService.php:
		if ( $screen == "TRANSFER_LIST" )
		{
			...
			$str .= "|1,trsf_api";
			$str .= "|1,trsf_temp_f";
		}
		if ( $screen == "TRANBASE_LIST" )
		{
			...
			$str .= "|1,TRSB_API";
			$str .= "|1,TRSB_TMP_F";
		}






********************************************************************************************************************** 
Version: 9.08.09.01
Tag: Omega-9-08-09-01-BRANCH-UTF8-02-RC
Date Tagged:[20/03/2018]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[20/03/2018]
********************************************************************************************************************** 

BZ: [OM5K-4156] Improve the speed of Tank Strapping Data Import
Solution:
1. When entering screen Tank Strapping from Tank Status, set the height range from 0 to 1000
2. When user moves mouse over the button "Import Data", the following tooltip will pop up:
	Format of each line: aaaa,bbbb,cccc,dddd
	aaaa:Height/Level 
	bbbb:Observed Volume 
	cccc:Tank Code 
	dddd:Depot Code
3. When user clicks the button "Import Data", a dialog will pop up for selecting a file to import.
4. After user selected a file, the system may give following warnings 
	a. No data found in the file to import.
	b. The file must contain all strapping data for just one tank, but more than two tank's data found.
	c. The tank in the file does not exist on the site.
5. If file format is correct, system will ask user to confirm: The data imported will overwrite existing straps. Do you wish to continue?
6. If user confirms, a progress dialog will appear and shows the importing progress, and user can click any button to stop the process. Instead of importing all data at once, we import 1000 records each time until all data is done.
7. An Oracle Stored Procedure is designed to do the bulk insertion of data, so speed is improved a lot.

BZ: [OM5K-4151] Frontend change: add Sulphur(wt%) and Flash Point (Degree C) at TANK level.
Solution:
1. On 'Tank Status' screen, add 'Sulphur(wt%)' and 'Flash Point' to Grid
2. On 'Tank Status' screen, add 'Sulphur(wt%)' and 'Flash Point' to Form
3. The following configuration can be used to show or hide these two columns in Grid
	in /var/www/htdocs/amfservices/core/services/ScreenGridColumnService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			// need tutn on when sulphur/flashpoint management is enabled
			$str .= "|1,tank_sulphur";
			$str .= "|1,tank_flashpoint";
		}
4. The following configuration can be used to show or hide these two fields in Form
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			// need tutn on when sulphur/flashpoint management is enabled
			$str .= "|fld__tank_sulphur,1";
			$str .= "|fld__tank_flashpoint,1";
			$str .= "|fld__tank_sulphur__tank_flashpoint,1";
		}

BZ: [OM5K-2992] the Std Density and API are not populated when adding new tanks.
Solution:
1. The following configuration can be used to show or hide API-related fields and button in Form of screen 'Tank Status'.
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			// need tutn on when API/std density management is enabled
			$str .= "|btn_recalcDensity,0";
			$str .= "|fld__tank_15_density,0";
			$str .= "|fld__tank_api,0";
		}
2. When the field 'API' and 'Std Density' and button 'Calculate Density' are visible in Form of screen 'Tank Status', the following features are added on the scrren 'Tank Configuration':
	a. the value of the field 'API' and 'Std Density' will be calculated whenever the value of the field 'Density' is modified.
	b. the new value of the field 'API' and 'Std Density' will be saved in database when creating or updating a tank record.
Note: if API-related fields and button are invisible, their values in database cannot be changed.

BZ: [OM5K-4129] On the screen 'Base Product', add the new fields for Density Range capture for each Base Product.
Solution:
1. In main grid list, add columns 'Base Prod Min Density' and 'Base Prod Max Density'.
2. In CREATE/EDIT form, add two new fields of 'Density Range'.
3. The following configuration can be used to show or hide these two columns in Grid
	in /var/www/htdocs/amfservices/core/services/ScreenGridColumnService.php:
		if ( $screen == "BASE_PRODUCTS" )
		{
			...
			// need turn on when density range is enabled
			$str .= "|1,base_dens_lo";
			$str .= "|1,base_dens_hi";
		}
4. The following configuration can be used to show or hide these two fields in Form
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "BASE_PRODUCTS" )
		{
			...
			// need turn on when density range is enabled
			$str .= "|fld__base_dens_lo,1";
			$str .= "|fld__base_dens_hi,1";
			$str .= "|fld__base_dens_lo__base_dens_hi,1";
		}
5. If Density Range fields are visible, their values in database can be changed; if invisible, no change.
6. If Density Range fields are visible, 
	a. selecting a new Base Product Classification will change the default density range of this base product.
	b. the value must be 0 or positive real number
	c. the value must fall between the default density range of base class
	d. the low density must not be greater than high density.

BZ: [OM5K-4163] Base Products screen has some different fields in different branches. Make these fileds configurable.
Solution:
1. In main grid list, add bitumen related columns.
2. In CREATE/EDIT form, add bitumen related fields.
3. The following configuration can be used to show or hide these bitumen related columns in Grid
	in /var/www/htdocs/amfservices/core/services/ScreenGridColumnService.php:
		if ( $screen == "BASE_PRODUCTS" )
		{
			...
			// need turn on when bitumen related features are enabled
			$str .= "|0,base_ref_temp";
			$str .= "|0,base_ref_tunt";
			$str .= "|0,base_ref_tunt_name";
			$str .= "|0,base_corr_mthd";
			$str .= "|1,base_corr_mthd_name";
			$str .= "|0,base_ref_temp_spec";
			$str .= "|1,base_ref_temp_spec_name";
			$str .= "|1,base_limit_preset_ht";
		}
4. The following configuration can be used to show or hide these bitumen related fields in Form
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "BASE_PRODUCTS" )
		{
			...
			// need turn on when bitumen related features are enabled
			$str .= "|fld__base_ref_temp,1";
			$str .= "|fld__base_ref_tunt,1";
			$str .= "|fld__base_corr_mthd,1";
			$str .= "|fld__base_ref_temp_spec,1";
			$str .= "|fld__base_limit_preset_ht,1";
		}
5. If bitumen related fields are visible, their values in database can be changed; if invisible, no change.
	
	

BZ: [OM5K-4060] A new screen will be provided which will be accessible via the Tank Status widget.
1. A new screen "Tank Strapping" is created, where the user can 
	a. Filter the strapping data by depot, tank, level range.
	b. Export the filtered result into a CSV file.
	c. Import the strapping data for a tank from a CSV file.
	d. Create a strapping volume.
	e. Update a strapping volume.
	f. Delete a strapping volume.
	g. Delete all strapping data of a tank.
2. A new button "Tank Strapping" is added in details form of the screen "Tank Status". 
	a. When the button is clicked, it open the scrren "Tank Strapping" and display the strappiong data of current tank.
	b. The following configuration can be used to show or hide the button above
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			$str .= "|btn_tankstrap,1";
			...
		}

BZ: [OM5K-4061] Must be able to import a CSV file to populate a given tank with strapping data.
1. On screen "Tank Strapping", Click the button "Import Data", a File Dialog will appear and allow user to select a CSV file.
2. After the user picks up a CSV file, system will prompt Errors if the file is blank or the file contains strapping data for more than one tank.
3. If the CSV file is valid, system will find the tank in the file, remove all strapping data of that tank from database, and re-populate with data in the file.

BZ: [OM5K-4062] Can calculate volume and mass by tank product level.
1. On the screen "Tank Status", add a new button "Calculate Quantity by Level" in the form "Update Status".
2. The following configuration can be used to show or hide the button above
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			$str .= "|btn_recalcLevel,1";
			...
		}
3. This button will be disabled if any of the fields 'Density', 'Observed Temperature', 'Product Level' is blank.
4. After the button is clicked, 
	a. if strapping table has no data, prompt error message.
	b. if strapping table has one record, prompt error message.
	c. if calculation fails and no volumes found in return XML, prompt error message.
	d. system will use the product level to find an observed volume by linear interpretation from straping table, then use this volume, density, and temperature to calculate other volume or mass
5. The algorithm to find observed volume by product level in strapping table.
	assume that there are four strapping points:
	6mm, 60000L
	10mm, 100000L
	12mm, 120000L
	16mm, 160000L
	when level = 6, 10, 12, or 16, use exact volume number at the point;
	when 6<level<10, use (6,60000) and (10, 100000) as two points for linear calculation;
	when 10<level<12, use (10,100000) and (12, 120000) as two points for linear calculation;
	when 12<level<16, use (12,120000) and (16, 160000) as two points for linear calculation;
	NOTE: the following two steps need further discussion
	when level<6, either return error or use (6,60000) and (10, 100000) as two points for linear calculation;
	when level>16, either return error or use (12,120000) and (16, 160000) as two points for linear calculation;
6. Moved Calc buttons from right side to the bottom of Status form, so they would appear regardless of  screen resolution.
7. The following configuration can be used to show or hide the button 'Calculate Density', and the field 'Std Density' and 'API'
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			$str .= "|btn_recalcDensity,0";
			...
			$str .= "|fld__tank_15_density,0";
			$str .= "|fld__tank_api,0";
			...
		}


	
BZ: [OM5K-4058] Add fields Tank Ullage, Tank Active Status on Tank Status screen
1. Add column 'Tank Ullage' to the list.
2. Add field 'Tank Ullage' to the form of 'Update Status', and make it visible and editable.
3. Add column 'Tank Active' to the list only, and its data is derived from Bay Arm Configuration.
4. The following configuration can be used to show or hide the field 'Tank Ullage'
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			$str .= "|fld__tank_ullage,1";
			...
		}
5. The following configuration can be used to show or hide the column 'Tank Ullage' and 'Tank Active', or adjust their sequences:
	in /var/www/htdocs/amfservices/core/services/ScreenGridColumnService.php:
		if ( $screen == "TANK_STATUS" )
		{
			...
			$str .= "|1,tank_active";
			...
			$str .= "|1,tank_ullage";
			...
		}
	
BZ: [OM5K-4059] Add fields ATG Status, Last Manual Update Date/Time Status on Tank Status screen
1. Add column 'ATG Status' to the list, and display as:
	a. 0 - means Error, show Red light icon
	b. 1 - means Normal, show Green light icon 
	c. Null - show blank
2. Add column 'ATG Manual Updated' to the list, and this field will be updated each time when user changes tank status values in GUI form.
3. The following configuration can be used to show or hide the column 'ATG Status' and 'ATG Manual Updated', or adjust their sequences:
	in /var/www/htdocs/amfservices/core/services/ScreenGridColumnService.php:
		if ( $screen == "TANK_STATUS" )
		{
			$str .= "|1,tank_atg_status";
			...
			$str .= "|1,tank_atg_manchg,DateTimeRenderer";
			...
		}

BZ: [OM5K-3979][OM5K-4111] In Order Listing screen, add a dropdown list in filter bar, allow user to select either 'Order Time' or 'Expiry Date' to filter the orders on date range. The default choice is 'Order Time'.

BZ: [OM5K-3586] In Tank Status screen, Exp Coeff values will be updated whenever a tank in grid is selected.



BZ: [OM5K-4025] 
1. Add Rail Tank Car image to Equipment Types, Equipment List , and Tanker List screen. 
2. User can create or delete Rail Tank Car type and create a new tanker or equipment of this type.
3. The availability of this type is controlled by a Site Configuration: SITE_CONFIG.SITE_RAIL_TANK_AVAILABLE.

BZ: [OM5K-3948] In the screen Equipment List, make Type Filter list the non-COMBO Equipment Types. 

BZ: [OM5K-4029] Provide multilingual support to Folio Summary/Management screen

BZ: [OM5K-4030] Get encoding type from database instance setting instead of hard coding

BZ: [OM5K-4031] Make login locale ID configurable.
use configuration 'SITE_DEFAULT_LOGIN_LANG_ID' in table SITE_CONFIG.
=0: en_AU; =1: en_US; =2: zh_CN





********************************************************************************************************************** 
Version: 9.08.08.02
Tag: Omega-9-08-08-02-BRANCH-UTF8-01-RC
Date Tagged:[25/01/2018]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[25/01/2018]
********************************************************************************************************************** 


BZ: [OM5K-4000] The field should not show the warning message
Solution: In screen 'Delivery Location', replace the validation type of field 'Delv Loc Code' with 'alphanumericspecial' which will allow DOT in the text. In popup 'Customers linked to Delivery Location', set the validation type as 'document'.


BZ: [OM5K-2752] Updated base product, Journal said change [0] to [2] which is not make sense to customers
Solution: 
1. Create a JSON file 'langEnums.json' to save enum messages.
2. Create a JSON file 'langColumnEnums.json' to save the relations of columns and enums.
3. When system records the journal of an UPDATE action, checks the JSON files to see if the changed field has the relation to enums, if found, record the enum texts of old/new values; otherwise, just records the old/new values.
4. Examples:
Person [DKI_SUPER_USER(9999)], Action [Update], Field [Base Ref Temp Spec], Old Value [3::60F], New Value [1::COMPENSTN_PT], Screen [Base Products]. Record key: [Base Code=TSTJNL1].
Person [DKI_SUPER_USER(9999)], Action [Update], Field [Base Cat], Old Value [2::Gasolines], New Value [4::Diesel oils/Fuel oils/Heating oils], Screen [Base Products]. Record key: [Base Code=TSTJNL1].


BZ: [OM5K-3806] Journalling need to support multilingual
Solution:
1. Create a JSON file 'langColumns.json' to save multilingual labels for table columns.
2. Create a JSON file 'langMessages.json' to save multilingual labels for fields, actions, results and screens.
3. When system records the journal, get the labels from these two JSON files, construct the messages in  multiple languages and then record them.
4. Create a JSON file 'langEnums.json' to save multilingual labels for enums.
5. Create a JSON file 'langColumnEnums.json' to save the relationship between columns and enums/tables, which may have the following values for a column:
	a. 'NA'
	b. 'ENUM_TYPE_NAME'
	c. 'ENUM|ENUM_TYPE_NAME|LANG_OPTION|INP_CLN|OUT_CLN'
	d. 'TABLE|TABLE_NAME|LANG_OPTION|INP_CLN|OUT_CLN'
	e. 'ENUMBIT|ENUM_TYPE_NAME|LANG_OPTION|INP_CLN|OUT_CLN'
6. When system prepare the old/new values for the journal, get the column setting from 'langColumnEnums.json', and do the following actions:
	a. 'NA' 
		- use the original value
	b. 'ENUM_TYPE_NAME' 
		- get the label from 'langEnums.json' according to language code, enum type name, and value. The label would look like: '1::Gasoline'.
	c. 'ENUM|ENUM_TYPE_NAME|LANG_OPTION|INP_CLN|OUT_CLN'
		- get the label from ENUM SQL scripts according to language code, enum type name, input field, output field and value. The label would look like: '1::Gasoline'.
	d. 'TABLE|TABLE_NAME|LANG_OPTION|INP_CLN|OUT_CLN'
		- get the label from TABLE SQL scripts according to language code, table name, input field, output field and value. The label would look like: '1000099::Diesel 10'.
	e. 'ENUMBIT|ENUM_TYPE_NAME|LANG_OPTION|INP_CLN|OUT_CLN'
		- get the label list from ENUM SQL scripts according to language code, enum type name, input field, output field and value. Binary functions are performed and the label would look like: '122::SUPPLIER,CUSTOMER,DRAWER,ISSUER,EMPLOYER'.
7. After the enhancement, the journal message written by PHP would look like the following
	a. action: CREATE 
	   format: Person [user name(user code)], Action [Create], Value [main values of new record], Screen [screen/table name]. Record key: [KEY column=KEY value].
	   example: Person [DKI_SUPER_USER(9999)], Action [Create], Value [[TSTJNL1 - tstjnl1]], Screen [Base Products]. Record key: [Base Code=TSTJNL1].
	b. action: DELETE 
	   format: Person [user name(user code)], Action [Delete], Value [main values of new record], Screen [screen/table name]. Record key: [KEY column=KEY value].
	   example: Person [DKI_SUPER_USER(9999)], Action [Delete], Value [[TSTJNL1 - tstjnl1]], Screen [Base Products]. Record key: [Base Code=TSTJNL1].
	c. action: UPDATE 
	   format: Person [user name(user code)], Action [Update], Field [table column name], Old Value [old value ID/code::old value label], New Value [new value ID/code::new value label], Screen [screen/table name]. Record key: [KEY column=KEY value].
	   example: Person [DKI_SUPER_USER(9999)], Action [Update], Field [Cmpy Type], Old Value [172::CARRIER,CUSTOMER,ISSUER,HOST], New Value [122::SUPPLIER,CUSTOMER,DRAWER,ISSUER,EMPLOYER], Screen [Companys]. Record key: [Cmpy Code=TSTJNL].





********************************************************************************************************************** 
Version: 9.08.08.02
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[07/12/2017]
********************************************************************************************************************** 

BZ: [OM5K-3986] Multilingual - warning messages are not in the correct layer in Role access control screen.
Define the dialog of 'Create Role' as the parent of warning message box.

BZ: [OM5K-3987] Multilingual - Translation is not fully completed in Role access control screen
1. add multilingual support to the validation prompts for Role Name field when creating a new role
2. add multilingual support to 'By' in filter bar

BZ: [OM5K-3988] Multilingual - Manual closeout confirming message has not been converted. 
Solution: Manual Closeout Confirming message.

The following are old issues fixed but not tested yet previously.

BZ: [OM5K-3940] Multilingual - translation is missing. 
BZ: [OM5K-3845] Multilingual support to Base Product Class
BZ: [OM5K-3801] Front End data validation module need to support multilingual design
BZ: [OM5K-3789] Multilingual support in Data Validation prompts
BZ: [OM5K-3774] Convert Customer Category screen to FLEX and add Multilingual support
BZ: [OM5K-3760] Delivery locations screen conversion to Chinese
BZ: [OM5K-3759] Convert Customers screen for Multilingual support
BZ: [OM5K-3758] Site configuration conversion to Multilingual support
BZ: [OM5K-3757] Home Screen Improvements and Chinese support
BZ: [OM5K-3738] Chinese GUI - The filter is not working correctly in Load Meter screen. 
BZ: [OM5K-3737] Chinese GUI - The HazChem screen improvement
BZ: [OM5K-3653] Bay Configuration Screen to support UTF-8 and Multilingual functions
BZ: [OM5K-3632] load retention
BZ: [OM5K-3631] time code (role access config issue, don't need fix)
BZ: [OM5K-3619] Add multilingual support for Special movements screen - improve the screen loading speed
BZ: [OM5K-3618] Add multilingual support for screens behind Nomination screen
BZ: [OM5K-3617] Add multilingual support for Personnel screen
BZ: [OM5K-3588] Stock Reconciliation spelling mistake
BZ: [OM5K-3314] Multilingual handling - the Date Time Calendar and range is blank.? 
BZ: [OM5K-3049] Add multilingual support for Nomination Transactions screen
BZ: [OM5K-2953] Add multilingual support for Special Movements screen
BZ: [OM5K-2607] Omega LLK - Thai language support - In Customer screen, Thai language is incorrect.







********************************************************************************************************************** 
Version: 9.08.08.02
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[06/12/2017]
********************************************************************************************************************** 

BZ: [OM5K-3966] Need translation for footer bar of Om5000 screen
Multilingual support for label 'Server Date/Time' and 'Warning'

BZ: [OM5K-3968] Use multilingual contents for tips in column Trip Source in Load Schedules screen

BZ: [OM5K-3969] Allow multilingual inputs in Code/Name fields in Compliance Messages screen
Solution:
1. When opening 'Compliance Messages' screen, read the configuration of form fields and set the field 'cm_message_code' and 'cm_message_name' to allow multilingual contents
2. In /var/www/htdocs/amfservices/core/services/ScreenFormColumnService.php, add the follwoing configuration:
		if ( $screen == "COMPLIANCE_MESSAGES" )
		{
			$str .= "|cm_message_code,document,16";
			$str .= "|cm_message_name,document,128";
		}
3. Add multilingual support the dropdown list 'Compliance Message Locale'.

BZ: [OM5K-3971] When mouse hover on version number in Login dialog, tip content is different.
Solution: get the sub string from whole version number and displays as major version number in tip

BZ: [OM5K-3944] Multilingual - Role access screen is not fully converted yet. 
1. Add multilingual support to Role Access screen.
Note: the content in column Description is created by user. if it is English when created, it will always display as English.
2. Previously the filter tried to match the text starting from first letter, now it can match any location.

CW: [OM5K-3938] Multilingual - Fields are required to be multilingual.
Time Code Screen


BZ: [OM5K-3939] Multilingual - Multilingual convertion has not done yet.
1. Screen Role Access is done. refer to OM5K-3944
2. Screen Host Message Management will be hidden for ShellNG, so nothing will be done for this screen.
3. Add multilingual support to screen Folio Scheduling and its two TABs: Closeouts Exception Planner and Closeouts Settings
4. Closeout Clendar hasn't been done yet

BZ: [OM5K-3973] Multilingual - Conversion is missing. 
Convert Folio Scheduling -> tab Closeout Calendar to Multilingual available.
	
BZ: [OM5K-3976] In Journaling screen, use the correct translation for EVENT

BZ: [OM5K-3981] Multilingual - the screen name is the same
Modify the translation of 'Metering'
	



********************************************************************************************************************** 
Version: 9.08.08.02
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-08-08-02-BRANCH-UTF8
Date Built:[29/11/2017]
********************************************************************************************************************** 

New Features:

BZ: [OM5K-3962] User can edit Equipment Type Category in GUI
In Equipment Type screen, when user clicks an equipment type and if this type is not the combination, display a list of equipment images in the UPDATE form, so user can edit the equipment type category. System displays PRIME MOVER and FLATBED if the number of equipment compartments is ZERO; TRAILER, RIGID and SHIP if the number of equipment compartments is greater than ZERO.

BZ: [OM5K-3918] ExxonMobil NZ Only Transportation Documents - new Frontend for dangerous goods
1. A new screen 'Dangerous Goods' is designed to create, update, or delete the DG information.
2. A dropdown list 'Dangerous Goods' is added in Drawer Products CREATE/UPDATE form.
3. A button 'Manage Dangerous Goods' is added in Drawer Products CREATE/UPDATE form, which can be clicked to pop up the screen 'Dangerous Goods'.
4. The following configuration can be used to show or hide the dropdown list and button above
	in /var/www/htdocs/amfservices/core/services/ScreenFormButtonService.php:
		if ( $screen == "DRAWER_PRODUCTS" )
		{
			$str .= "|btnProdDGLink,1";
			$str .= "|prod_dglink,1";
		}



Bug Fixes:

BZ: [OM5K-3945] Multilingual - logical printer delete error.  
Solution: When deleting a record, firstly use the printer usage id to get the print usage code, then pass this code instead of usage name to CGI to delete.

BZ: [OM5K-3954] Multilingual - the ratio sub-screen is read-only under certain situations. 
Solution: In Drawer Products screen, when creating or updating a product, both the base product list and ratio grid will be disabled if the drawer company is missing or not selected.

BZ: [OM5K-3937] Multilingual - The creation, update, and delete of pre-schedule and pre-order are failed. 
Solution: In Load schedules screen, when creating, updating or deleting a pre-schedule or pre-order trip, check if the CGI response text has either 'Success' or '³É¹¦'. The DB action fails if these texts not detected.

BZ: [OM5K-3953] Multilingual - Tank group name is not multilingual
Solution:
1. When opening 'Tank Group' screen, read the configuration of form fields and set the field 'tgr_name' to allow multilingual contents
2. In /var/www/htdocs/amfservices/core/services/ScreenFormColumnService.php, add the follwoing configuration:
		if ( $screen == "TANK_GROUP" )
		{
			$str .= "|tgr_name,document,16";
		}

BZ: [OM5K-3955] Multilingual - Product group name needs to be multilingual. 
Solution:
1. When opening 'Product Group' screen, read the configuration of form fields and set the field 'pgr_code' and 'pgr_name' to allow multilingual contents
2. In /var/www/htdocs/amfservices/core/services/ScreenFormColumnService.php, add the follwoing configuration:
		if ( $screen == "PRODUCT_GROUPS" )
		{
			$str .= "|pgr_code,document,16";
			$str .= "|pgr_name,document,100";
		}

BZ: [OM5K-3956] Multilingual - CGI should return multilingual message as UTF-8 format.  
Solution: In Allocations screen, save the PHP data service file AllocationService.php and AllocationPeriodService.php from GB2312 to UTF-8 format


BZ: [OM5K-3960] Adding new report from frontend does not set IS_CLOSEOUT_REPORT. 
In Report Profile screen, add a dropdown list 'Closeout Report By' which decides if closeout reports are created according to date ranges or folio number ranges

BZ: [OM5K-3961] Adding new report from frontend does not set RPT_FILE correctly 
In Report Profile screen, when creating a new record, force the value of RPT_FILE to end with '.jrxml' instead of '.jasper'.

BZ: [OM5K-3940] Multilingual - Translations are missing. 
On Gate Permission screen, replace "can not be blank!" with multilingual contents

BZ: [OM5K-3941] Multilingual - getHostMessage has problem. 
Fixed the bug in PHP data service for getHostMessage.

BZ: [OM5K-3936] Multilingual - we might need to give the Multilingual feature into Equipment and Tanker code
Both Equipment and Tanker code can be configured to accept Multilingual contents.
In /var/www/htdocs/amfservices/core/services/ScreenFormColumnService.php
There is :
        if ( $screen == "EQUIPMENT_LIST" )
        {
            //$str .= "|eqpt_code,document,40";
            ......
        }
		if ( $screen == "TANKER_LIST" )
		{
			//$str .= "|tnkr_code,document,40";
			......
		}
Uncomment the line of eqpt_code and tnkr_code. BUT please test the loading with tanker/eqpt having Chinese code

BZ: [OM5K-3933] FLEX GUI: Eqpt Type screen did not verify the return value before showing the Success message. 
Solution: Check the response message of CREATE action, display Success message when found text "Ok".


BZ: [OM5K-3935] Multilingual - Translations are missing.  
1. In Company Special Actions dialog, add multilingual support to the component ToggleSwitch box "Yese/No"
2. In Company Special Actions dialog - Transportation Document TAB, add multilingual support to the dropdown list 'Template Locale'


BZ: [OM5K-3910] DELIVERY GOODS EXPIRY on the TANKER LIST screen is incorrect, it should be D.G. EXPIRY. 
it can be updated in Access Control->Expiry dates screens
	
BZ: [OM5K-3923] The length of Company Email Address needs to increase
1. When opening 'Report Configuration' screen, read the configuration of form fields and set the field 'report_cmpyemail'  to allow multilingual contents
2. In /var/www/htdocs/amfservices/core/services/ScreenFormColumnService.php, add the follwoing configuration:
		if ( $screen == "REPORTCOMPANY" )
		{
			$str .= "|report_cmpyemail,email,256";
		}
3. When journaling, convert the message to an array with each item having 512 bytes, then do the recording.

BZ: [OM5K-3874] Journal search enhancement is required. 
Solution: somehow, removeAll function did not do the job of clearing array items, so replaced with new Array().

BZ: [OM5K-3879] LPG and UNLOADING Templates are not able to be listed and selected on the Company special actions frontend. 
Add two new types for document templates:
    3 - BOUL - BILL OF UNLADING
    4 - BOL_LPG - LPG BILL OF LADDING
    So LPG and UNLOADING Templates are able to be listed and selected on the Company special actions frontend.  

BZ: [OM5K-3949] auto login is always be English which is not convenient for other language users. They have to log out first and login as their own language. 
Solution: Since this release will be used in China, set the default language as Chinese in Login screen. In this way, when auto-login occurs, system will use Chinese as default.


BZ: [OM5K-2639] in address screen, the multilingual texts handling has been done but there is a issue to mess up multiple rows into one line.
Caused by non-UTF-8 characters in address. It should have been fixed now.

BZ: [OM5K-2640] When create a new company address in Companies screen, the created Chinese address is missing.
Caused by non-UTF-8 characters in address. It should have been fixed now.


BZ: [OM5K-3314] Multilingual handling - the Date Time Calendar and range is blank. 
For Movement Nominations screen, the Date Time Calendar and range is always blank because the total number of nominations won't be very big so system can get them all at one time.
For the following screens, the range is configurable in table SITE_CONFIG:
Allocations:
	SITE_DEFAULT_DATERANGE_ALLOCATION	-1~~-1	The default date ranges in allocation. X~~Y: X days before today, Y days after today. -1: blank 
Auditing Data:
	SITE_DEFAULT_DATERANGE_AUDIT	0.020833~~0	The default date ranges in audit reporting. X~~Y: X days before today, Y days after today. -1: blank 
Order Listing:
	SITE_DEFAULT_DATERANGE_CUSTORDER	7~~1	The default date ranges in open orders. X~~Y: X days before today, Y days after today. -1: blank 
Journal:
	SITE_DEFAULT_DATERANGE_JOURNAL	0.125~~0	The default date ranges in live journals. X~~Y: X days before today, Y days after today. -1: blank 
Load Schedules:
	SITE_DEFAULT_DATERANGE_SCHEDULE	7~~0	The default date ranges in load schedules screen. X~~Y: X days before today, Y days after today. -1: blank 
Transaction List:
	SITE_DEFAULT_DATERANGE_TRANSACTION	7~~0	The default date ranges in transactions. X~~Y: X days before today, Y days after today. -1: blank 

	
BZ: [OM5K-3318] Multilingual handling - Movement Nomination screen defects 
need UTF-8 DB and env to test the multilingual contents. Should be OK now. Also adjust the size of components to make all text visible and straight

BZ: [OM5K-3319] Multilingual handling - Unreadable information 
need UTF-8 DB and env to test the multilingual contents. Should be OK now. 

BZ: [OM5K-3320] Multilingual handling - The resource is blank. [Movement Nominations]
need UTF-8 DB and env to test the multilingual contents. Should be OK now. 

BZ: [OM5K-3291] Multilingual issues package 3 - Ship Type is unreadable. 
need UTF-8 DB and env to test the multilingual contents. Should be OK now.

BZ: [OM5K-3290] Multilingual issues package 2 - Shall we need to make the warning messages to be Chinese as well? 
the multilingual support has been added to form field validation prompts

BZ: [OM5K-3289] Multilingual issues package 1 - ????? question mark
For Exported CSV file, if open with notepad, user can see multilingual. Need configure Excel with proper language setting, then question mark will be gone
For GUI screens, need UTF-8 DB and env to test the multilingual contents. Should be OK now.

BZ: [OM5K-2641] Omega5000 - MOBYA - In Equipment List, since Equipment Title is Chinese, in certain related list should able to display Chinese as well.
need UTF-8 DB and env to test the multilingual contents. Should be OK now.


    
	
	
	



********************************************************************************************************************** 
Version: 9.08.08.02
Tag: Omega-9-08-08-02-BRANCH-DCS-13
Date Tagged:[04/10/2017]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[05/10/2017]
********************************************************************************************************************** 

New Features:

BZ: [OM5K-3804] Prepare Design/Data structure document for each screen

BZ: [OM5K-3807] Develop the API for Bay View (Overview Screen)

BZ: [OM5K-3808] Design config settings and database for Bay View screens



Bug Fixes:
	
BZ: [OM5K-3820] Report configuration selecting company ALL as a filter does not work.
Solution: When the company 'ALL' is chosen, treat it as a company to filter its report configurations. 
	

BZ: [OM5K-3836] Omega 5000 at LLK thailand when Ignore tolerance check if ticked, and load closed. When open the next load it is still ticked.
Solution: Clear the checkbox of 'Ignore tolerance check' when the load FORM is closed or BOL is viewed/printed.

BZ: [OM5K-3873] Priority field to be added to the Load schedule listings section in Load Schedule Screen
Solution: Add the column 'Priority' between the column 'Supplier' and 'Host Data'

BZ: [OM5K-3818] Add the ability to enable/disable the button 'Create'(Manaual Transaction) and 'Delivery Details' in Load Schedules screen and similar buttons in relevant screens
Solution: Add a configuration file 'ScreenFormButtonService.php' which can control the visibilty of buttons. The visibility of certain buttons will be adjusted if the relevant settings are found in this file. For example, 
		if ( $screen == "LOAD_SCHEDULE" )
		{
			$str .= "|btnMakeTransaction,1";
			$str .= "|viewDeliveryDetails,1";
		}
	these two mbuttons will be visible if 1 is set, hidden if 0 is set.
This fix taks effects to Open Order Listing screen too.
	
BZ: [OM5K-3819] The disabled form fields were enabled in Load Schedules screen after returning from Manual Transactions screen.
Solution: Make sure the condition of form fields remain unchanged after returning from Manual Transactions screen.

BZ: [OM5K-3874] In Journal screen, the journal array will be cleaned completely before the new search, so some of the previous search results will not mix with the new results.







********************************************************************************************************************** 
Version: 9.08.06.05
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[??/08/2017]
********************************************************************************************************************** 

New Features:

BZ: [OM5K-3544] 
	1. Convert current equipment&personnel expiry dates screen from CGI-based to Flex-based, and add the three more for tankers. This screen has become one of TAB in the new screen of Expiry Dates and can be enabled by set SITE_CONFIG.SITE_EXPIRY_DATE_MANAGE_MODE as 1 or 3.
	2. add three global variables exp7, exp8 and exp9.
	3. if expiry date titles defined in EXPIRY_DATE table, assign it to exp7/8/9
	4. or use the text defined in locales

BZ: [OM5K-3549] To make the expiry title field changeable by operator, the following features are added.
	1. Dynamically allocate the group of expiry dates to different TAB. The number and title of TABs are controlled by the data in table EXPIRY_DATE_TARGETS.
	2. In each TAB, there are three expiry dates are added as DEFAULT and user can not delete it but can modify it.
	3. In each TAB, user can add, modify, delete non-default expiry dates. But user can not add new one if the total number reaches the limit which is defined in EXPIRY_DATE_TARGETS.EDTA_MAX_EXP. Tankers, equipment, and personnel can have their own maximum settings.
	4. use SITE_CONFIG.SITE_EXPIRY_DATE_MANAGE_MODE to control:
		a. = 1, enable the TAB of old expiry dates where the fixed number (3,3,3) of expiry date titles are managed for tankers, equipment and personnel.
		b. = 2, the TABs of new expiry dates, and the number and title of TABs are controlled by the data in table EXPIRY_DATE_TARGETS.
		b. = 3, enable both the TAB of old expiry dates and the TABs of new expiry dates.
		
BZ: [OM5K-3552] add a new setting SITE_EXPIRY_DATE_MANAGE_MODE in table SITE_CONFIG:
	use SITE_CONFIG.SITE_EXPIRY_DATE_MANAGE_MODE to control:
		a. = 1, enable the TAB of old expiry dates where the fixed number (3,3,3) of expiry date titles are managed for tankers, equipment and personnel.
		b. = 2, the TABs of new expiry dates, and the number and title of TABs are controlled by the data in table EXPIRY_DATE_TARGETS.
		b. = 3, enable both the TAB of old expiry dates and the TABs of new expiry dates.

BZ: [OM5K-3556/OM5K-3559] On Personnel screen, the following features are added to make new expiry dates compatible with existing 3 expiry dates:
	1. When the Unlimited Expiry Dates feature is turned on, the following actions are taken: 
		a. Disable the legacy expiry dates fields (view only) in CREATE/UPDATE form of main screen.
		b. Under those fields, show the button which can open a sub-screen to manage the new expiry dates. 
		c. In popup screen, user can add, edit, delete any expiry dates, so it is possible and correct that no expiry date is defined for parent PERSONNEL.
		d. The first three types of unlimited expiry dates are made as the clones of existing expiry dates:
				PSNL_EXPIRY_DATE_1 = PERSONNEL.PER_EXP_D1_DMY
				PSNL_EXPIRY_DATE_2 = PERSONNEL.PER_EXP_D2_DMY
				PSNL_EXPIRY_DATE_3 = PERSONNEL.PER_EXP_D3_DMY
		e. If user has defined any of 'PSNL_EXPIRY_DATE_1', 'PSNL_EXPIRY_DATE_2', or 'PSNL_EXPIRY_DATE_3', after popup screen closed, these values will be copied to the field 'PERSONNEL.PER_EXP_D1_DMY', 'PERSONNEL.PER_EXP_D2_DMY', or 'PERSONNEL.PER_EXP_D3_DMY' (the title of these fields are defined in EXPIRY_DATE and EXPIRY_DATE_TYPES)
	2. When the Unlimited Expiry Dates feature is turned off, the following actions are taken: 
		a. Enable the legacy expiry dates fields in CREATE/UPDATE form of main screen.
		b. Under those fields, hide the button which can open a sub-screen to manage the new expiry dates. 

BZ: [OM5K-3557/OM5K-3561] On Equipment List screen, the following features are added  make new expiry dates compatible with existing 3 expiry dates:
	1. When the Unlimited Expiry Dates feature is turned on, the following actions are taken: 
		a. Disable the legacy expiry dates fields (view only) in CREATE/UPDATE form of main screen.
		b. Under those fields, show the button which can open a sub-screen to manage the new expiry dates. 
		c. In popup screen, user can add, edit, delete any expiry dates, so it is possible and correct that no expiry date is defined for parent EQUIPMENT.
		d. The first three types of unlimited expiry dates are made as the clones of existing expiry dates:
				EQPT_EXPIRY_DATE_1 = TRANSP_EQUIP.EQPT_EXP_D1_DMY
				EQPT_EXPIRY_DATE_2 = TRANSP_EQUIP.EQPT_EXP_D2_DMY
				EQPT_EXPIRY_DATE_3 = TRANSP_EQUIP.EQPT_EXP_D3_DMY
		e. If user has defined any of 'EQPT_EXPIRY_DATE_1', 'EQPT_EXPIRY_DATE_2', or 'EQPT_EXPIRY_DATE_3', after popup screen closed, these values will be copied to the field 'TRANSP_EQUIP.EQPT_EXP_D1_DMY', 'TRANSP_EQUIP.EQPT_EXP_D2_DMY', or 'TRANSP_EQUIP.EQPT_EXP_D3_DMY' (the title of these fields are defined in EXPIRY_DATE and EXPIRY_DATE_TYPES)
	2. When the Unlimited Expiry Dates feature is turned off, the following actions are taken: 
		a. Enable the legacy expiry dates fields in CREATE/UPDATE form of main screen.
		b. Under those fields, hide the button which can open a sub-screen to manage the new expiry dates. 
		
BZ: [OM5K-3558/OM5K-3560] On Tanker List screen, the following features are added make new expiry dates compatible with existing 3 expiry dates:
	1. When the Unlimited Expiry Dates feature is turned on, the following actions are taken: 
		a. Disable the legacy expiry dates fields (view only) in CREATE/UPDATE form of main screen.
		b. Under those fields, show the button which can open a sub-screen to manage the new expiry dates. 
		c. In popup screen, user can add, edit, delete any expiry dates, so it is possible and correct that no expiry date is defined for parent TANKER.
		d. The first three types of unlimited expiry dates are made as the clones of existing expiry dates:
				TNKR_EXPIRY_DATE_1 = TANKERS.TNKR_LIC_EXP
				TNKR_EXPIRY_DATE_2 = TANKERS.TNKR_DGLIC_EXP
				TNKR_EXPIRY_DATE_3 = TANKERS.TNKR_INS_EXP
		e. If user has defined any of 'TNKR_EXPIRY_DATE_1', 'TNKR_EXPIRY_DATE_2', or 'TNKR_EXPIRY_DATE_3', after popup screen closed, these values will be copied to the field 'TANKERS.TNKR_LIC_EXP', 'TANKERS.TNKR_DGLIC_EXP', or 'TANKERS.TNKR_INS_EXP' (the title of these fields are defined in EXPIRY_DATE and EXPIRY_DATE_TYPES)
	2. When the Unlimited Expiry Dates feature is turned off, the following actions are taken: 
		a. Enable the legacy expiry dates fields in CREATE/UPDATE form of main screen.
		b. Under those fields, hide the button which can open a sub-screen to manage the new expiry dates. 

BZ: [OM5K-3678][OM5K-3684][OM5K-3685][OM5K-3686][OM5K-3688][OM5K-3690][OM5K-3691][OM5K-3713]
In the design of Expiry Dates Editor, left section lists the available EXPDATE types, and right section shows the EXPDATE records existed in DB. Select one or more lines in left section, the '+' button will be enabled. If clicking the button, the selected lines will be moved from left to right section with green CROSS icon added. The value of Enabled and Date Time column will be initialized as those in Left section. 
Select lines with green CROSS icon in right section, the button of 'TRASH' will be enabled, click it those lines will be moved from right to left.
Select lines without green CROSS icon in right section, both 'TRASH' and 'PEN' buttons will be enabled. Click button 'PEN' to add the icon 'PEN' to the selected lines so you can edit. Click button 'TRASH' to add/remove the icon 'TRASH' to/from the selected lines or remove icon 'PEN' only. Click 'Update' to make permanent changes.
However, the user still can update Child's 'Active' independently, which is for the best of flexibility:
TYPE ENABLED		TYPE REJECT			CHILD DETAIL ENABLED
1					1					1				every child needs to check expiry date and reject
1					1					0				every child needs to check expiry date and reject, but this particular child needs no check
1					0					1				every child needs to check expiry date but no reject
1					0					0				every child needs to check expiry date but no reject, but this particular child needs no check 
With the following settings no child needs the check. We certainly can force the setting to (0  0  0), but if we do so, when TYPE ENABLED is set back to 1, all particular settings for particular children are gone. 
0					1					1				
0					1					0
0					0					1
0					0					0


BZ: [OM5K-3617] Make multilingual convertion for Personnel:
	1. Personnel screen
	2. Password Check Dialog
	3. Password Reset Dialog
		
BZ: [OM5K-3618] Add multilingual support for screens related to Nomination screen
	1. Add multilingual support for screen 'Company Bay Movement'
	2. Add multilingual support for screen 'Onsite Report'
	3. Add multilingual support for screen 'Jasper Report'
	4. Enhance multilingual support for screen 'Manual Transactions'
	5. Add multilingual support for module 'Manual Transactions Data'
	6. In screen 'Company Bay Movement', instead of getting all data in one process, now use the different methods to retrieve every list data, so the screen can be loaded faster.

BZ: [OM5K-3619] Add multilingual support for Special Movements screen - improve the screen loading speed
	
BZ: [OM5K-3654] Convert HazChem screen from CGI-based to FLEX-based and add multilingual support.

BZ: [OM5K-3655] Convert Load Meter screen from CGI-based to FLEX-based and add multilingual support.

BZ: [OM5K-3656] Add multilingual support to Journal screen.

BZ: [OM5K-3757] Add multilingual support to the widgets in Home Screen.

BZ: [OM5K-3758] Add multilingual support to the screen Site Configuration.

BZ: [OM5K-3759] Convert Customers screen from CGI to FLEX and add Multilingual support. Also 
	1. add the links to screens of Addresses, Customer Categories, Allocations, Order Listing, and Delivery Locations. 
	2. Some new features are added for a popup screen of Allocations from Customers, mainly for Customer Allocation. 
	3. Some new features are added for a popup screen of Order Listing from Customers. 
	Note: User cannot delete a customer if the customer has allocation, open order(s) or/and delivery allocation(s). User can find information of children from column 'Customer Allocation', 'Total Orders', 'Total Delv Locations'.

BZ: [OM5K-3760] Convert the screen Delivery Locations from CGI to FLEX and add Multilingual support. The following features are added:
	1. add the links to screens of Addresses and Linked To Customers.
	2. In screen Linked To Customers, user can assign one or multiple customers to a delivery location, or remove one or multiple customers from a delivery location.
	3. If user enters the screen Delivery Locations from module by clicking Widget, he/she cannot delete the record if the delivery location has been used by customer(s) or/and open order(s). User can find information of children from column 'Total Customers', 'Total Orders'. If user really wants to delete, he/she has to use Linked To Customers to remove links first.
	4. If user enters the screen Delivery Locations from screen Customer, the customer supplier and customer account will display in filter bar, and he/she cannot delete the record if the delivery location has been used by customers (>1) or/and open order(s). User can find information of children from column 'Total Customers', 'Total Orders'. If the delivery location has no open order but has one customer, user still can delete it because system will delete the customer link.

BZ: [OM5K-3774] Convert Customer Category screen to FLEX and add Multilingual support. Note: User cannot delete record if customer category has been used by customer(s).

BZ: [OM5K-3789][OM5K-3801] Add multilingual support to the data validation module, mainly for the components of Textinput field, Combobox, Dropdown List.

BZ: [OM5K-3845] Add multilingual support to base product class, which can be seen in the screens of Base Products, Drawer Products, Tank Status.



Bug Fixes:

BZ: [OM5K-3631] Don't need the fix. The user 9999 need go to screen 'Role Access Management' in module 'Access Control', and turn on the permissions of view, update, create, or delete in 'Access'->'Time Codes' for the role of MANAGER.

BZ: [OM5K-3632] In TAB 'Closeout' of 'Site Configuration', the following changes are done:
	1. Add Toggle-Button for each of 5 settings related to closeout (column SITE_LD_RETN_NEWLDS, SITE_LD_RETNPRD, SITE_EXP_MONTHS, SITE_LD_RETNPRD_NEW_MOV, SITE_LD_RETNPRD_USED_MOV in table SITE). Click the button to change between 'Off' and 'On'
	2. When it is 'Off', the value of Numeric Stepper is cleaned and the component is disabled. If click button 'Update' now, value NULL will be saved in database.
	3. When it is 'On', the user can adjust the value between min and max.
	
BZ: [OM5K-3532] Use GUI_COMPANYS instead of COMPANYS to add company privileges in action. Also the changes have been done in PHP data service to make sure when the user of a non-sitemanager supplier login:
	1. In Tanker List screen, user can see itself and all of its child carriers in the dropdown list of owners and carriers. Previously, if a company is both carrier and employer and it is this supplier's child employer, it will appear in the dropdown list of carriers too.
	2. The fix for the list of carriers is also done in screens of Equipment List, Allocation, ID assignment.
	3. In Personnel screen, user can see itself and all of its child employers in the dropdown list of employers. Previously, if a company is both carrier and employer and it is this supplier's child carrier, it will appear in the dropdown list of employers too.
	4. The fix for the list of employers is also done in screen of ID assignment.
	
BZ: [OM5K-3695] Use a global setting SITE_CONFIG.SITE_DEFAULT_TIME_LENGTH to define the length of TIME section in date time string when display. 
	The value can be 3, 6 or 9 and default is 6. (3:" HH", 6:" HH:MM", 9:" HH:MM:SS") Note: Date time valaue in DB will be always yyyy-mm-dd hh:mi:ss
	
BZ: [OM5K-3820] Report configuration selecting company ALL as a filter does not work.
Solution: When the company 'ALL' is chosen, treat it as a company to filter its report configurations. 
	

BZ: [OM5K-3836] Omega 5000 at LLK thailand when Ignore tolerance check if ticked, and load closed. When open the next load it is still ticked.
Solution: Clear the checkbox of 'Ignore tolerance check' when the load FORM is closed or BOL is viewed/printed.

BZ: [OM5K-3873] Priority field to be added to the Load schedule listings section in Load Schedule Screen
Solution: Add the column 'Priority' between the column 'Supplier' and 'Host Data'

BZ: [OM5K-3818] Add the ability to enable/disable the button 'Create'(Manaual Transaction) and 'Delivery Details' in Load Schedules screen and similar buttons in relevant screens
Solution: Add a configuration file 'ScreenFormButtonService.php' which can control the visibilty of buttons. The visibility of certain buttons will be adjusted if the relevant settings are found in this file. For example, 
		if ( $screen == "LOAD_SCHEDULE" )
		{
			$str .= "|btnMakeTransaction,1";
			$str .= "|viewDeliveryDetails,1";
		}
	these two mbuttons will be visible if 1 is set, hidden if 0 is set.
	
BZ: [OM5K-3819] The disabled form fields were enabled in Load Schedules screen after returning from Manual Transactions screen.
Solution: Make sure the condition of form fields remain unchanged after returning from Manual Transactions screen.

BZ: [OM5K-3874] In Journal screen, the journal array will be cleaned completely before the new search, so some of the previous search results will not mix with the new results.



********************************************************************************************************************** 
Version: 9.06.02.02
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[??/04/2017]
********************************************************************************************************************** 

New Features:



Bug Fixes:
BZ: [OM5K-3527/3528] In Company Relations screen, 
	a. When modifying a company relation, if the child company is changed, system will check if the new company relation exists already and gives warning if it does. Otherwise, allow the user to change the child company, relation status, or relation comments 
	b. When creating a company relation, the data of relation status and comments was not recorded now is taken care of.




********************************************************************************************************************** 
Version: 9.06.02.02
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[21/04/2017]
********************************************************************************************************************** 

New Features:
* BZ: Auditing module was available in GUI but hidden by 'SITE_AUDIT_SCREEN_ENABLED'='N' previously. Now it is enabled and CLIENT_IP was fixed in PHP data services. (need DB patches and CGI changes for AUDIT )

* BZ: Role Configuration Enhancement. Related tasks: [OM5K-3442][OM5K-3446][OM5K-3451][OM5K-3452][OM5K-3453][OM5K-3454][OM5K-3455][OM5K-3472]

	1. New site configurations are added as follows (DB patch required):
		a. Add a new setting 'SITE_COMPANY_RELATION_ALLOWED' in table SITE_CONGIG with values 'Y' or 'N' to turn on or off the button "Company Relation" in screen "Companies".
		b. Add a new setting 'SITE_COMPANY_RELATION_PARENT_ROLES' in table SITE_CONGIG to control the list of roles available for parent company. The default value is '1' which means 'SUPPLIER'.
		c. Add a new setting 'SITE_COMPANY_RELATION_CHILD_ROLES' in table SITE_CONGIG to control the list of roles available for child company. The default value is '2,6' which means 'CARRIER,EMPLOYER'.
		
	2. A new screen 'Company Relations' is added (DB patch required), and the user can access it by the follwoing steps:
		a. In screen 'Companies', select a company to enter its EDIT form.
		b. The button 'Company Relations' will be visible and enabled if this company has the role(s) defined in 'SITE_COMPANY_RELATION_PARENT_ROLES' (default is SUPPLIER only) and 'SITE_COMPANY_RELATION_ALLOWED' is 'Y'.
		c. Click the button to pop up the screen 'Company Relations'.
		d. The user can add one or multiple relations.
		e. The user can modify one relation.
		f. The user can delete one or multiple relations.
		g. The user can enable or disable the relation through the tick box 'Relation Status'.
		h. The available roles for parent company is controlled by 'SITE_COMPANY_RELATION_PARENT_ROLES' in SITE_CONFIG.
		i. The available roles for child company is controlled by 'SITE_COMPANY_RELATION_CHILD_ROLES' in SITE_CONFIG.
	For a non-sitemngr supplier, it can manage two types of child companies:
		a. the child carriers/employers already linked to this supplier. update only! cannot create because the relation already exists, and do not delete unless necessary because once the relation deleted, that carrier/empployer will disappear from company list (only site-manager can re-create it) 
		b. this supplier's customers which happen to be either carriers or employers. user can create, update, or delete.
		
	3. In screen 'Companies', for a non-SITE_MANAGER company , it could manage the company records if :
		a. the company is the non-SITE_MANAGER company itself;
		b. the companies are child carriers or employers of the non-SITE_MANAGER company, where the non-SITE_MANAGER company must be a supplier, but child companies can not have the SUPPLIER type.
		c. the companies are customers of the non-SITE_MANAGER company, where the non-SITE_MANAGER company must be a supplier, but customers can not have the SUPPLIER type.
	Note: 
	Only SITE_MANAGER company can:
		a. assign a supplier (having customer type) as the customer of other suppliers and manage it lately.
		b. assign a supplier (having carrier type) as the child carrier of other suppliers and manage it lately.
		c. assign a supplier (having employer type) as the child employer of other suppliers and manage it lately.
	A non-SITE_MANAGER company can:
		a. assign a non-supplier (having customer type) as the customer of itself and manage it lately.
		b. assign a non-supplier (having carrier type) as the child carrier of itself and manage it lately.
		c. assign a non-supplier (having employer type) as the child employer of itself and manage it lately.	
		
	4. In screen 'Allocations', for a non-SITE_MANAGER company, it could manage the allocation if it is:
		a. the supplier company of the allocation;
		b. the allocated company (could be supplier, carrier, customer, or drawer) of the allocation;
		c. the parent supplier of the allocated carriers. (defined in table COMPANY_RELATION)
		c. the supplier of the allocated customers. (defined in table CUSTOMER)
		
	5. In screen 'Equipment List', for a non-SITE_MANAGER company , it could manage the equipment records if :
		a. the equipment's owner is the non-SITE_MANAGER company itself;
		b. the equipment's owner companies are child carriers of the non-SITE_MANAGER company (must be a supplier too).
		
	6. In screen 'Tankers', for a non-SITE_MANAGER company , it could manage the tanker records if :
		a. the tanker's owner or carrier is the non-SITE_MANAGER company itself;
		b. the tanker's owner or carrier companies are child carriers of the non-SITE_MANAGER company (must be a supplier too).
		
	7. In screen 'Personnel', for a non-SITE_MANAGER company , it could manage the personnel records if :
		a. the personnel's employer is the non-SITE_MANAGER company itself;
		b. the personnel's employer companies are child employers of the non-SITE_MANAGER company (must be a supplier too).
		
	8. The following GUI views are changed (DB patch required):
		GUI_COMPANYS
		GUI_ALLOCATIONS
		GUI_ALLOCATION_ADJUSTS
		GUI_ALLOCATION_ITEMS
		GUI_ALLOCATION_PERIODS
		GUI_EQUIPMENT_LIST
		GUI_TANKERS
		GUI_PERSONNEL



Bug Fixes:





********************************************************************************************************************** 
Version: 9.06.02.02
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[03/04/2017]
********************************************************************************************************************** 

New Features:



Bug Fixes:
* BZ: [OM5K-3422] Display the percentage with 2 digits after decimal point for the limit of ID tags.

* BZ: [OM5K-3433] Use different functions to convert the date time format for Schedule Date and Expiry Date.





********************************************************************************************************************** 
Version: 9.06.02.02
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[28/03/2017]
********************************************************************************************************************** 

New Features:

* BZ: [OM5K-2978] Linked to the issue OM5K-3061
* BZ: [OM5K-3232] Linked to the issue OM5K-3061
* BZ: [OM5K-3233] Linked to the issue OM5K-3061
* BZ: [OM5K-3234] Linked to the issue OM5K-3061
* BZ: [OM5K-2895] Linked to the issue OM5K-3062
* BZ: [OM5K-3236] Linked to the issue OM5K-3062
* BZ: [OM5K-3237] Linked to the issue OM5K-3062
* BZ: [OM5K-3238] Linked to the issue OM5K-3062
* BZ: [OM5K-2979] Linked to the issue OM5K-3063

* BZ: [OM5K-3387] Add a new field 'Description' in screen 'Drawer Products', and re-locate the '2nd Drawer' section from right column to the fourth row in CREATE/UPDATE form. 
	Note: DB patch is required for changes in table PRODUCTS and view GUI_PRODUCTS.

* BZ: [OM5K-3396] New features are added to support the limit of total ID tags allowed on site:
	1. A new side-wide parameter SITE_MAX_TAGS is added and can be updated in screen Site Configurations when testing. 
	2. When SITE_MAX_TAGS exists and the value is greater than ZERO, show the limit/used/percentage of ID tags in home widgets; otherwise, just show Total tags.
	3. When SITE_MAX_TAGS exists and the value is greater than ZERO, show the limit/used/percentage of ID tags in screen 'ID Assignment'; otherwise, just show Total tags.
	4. When SITE_MAX_TAGS exists and the value is greater than ZERO, disable the button 'Create' if total tags reach the limit in screen 'ID Assignment'; otherwise, always enable this button.
	Note: DB patch is required for 'SITE_MAX_TAGS' in table SITE_CONFIG.
	
* BZ: [OM5K-3358/3409] In screen 'Tank Status', the following changes are made for the usage of Coefficient of Expansion: 
	1. The field of 'Coefficient of Expansion' is added in the form and it is always optional. 
	2. The field is visible but not editable in normal circumstance.
	3. When button 'Update Status' is clicked, the field becomes editable if the tank base product is either Asphalt or using ASTM_C_OF_E as correction method, otherwise would be visible but not editable.
	4. If no values is entered, system will save it as ZERO in database.
	5. If a value is entered, system will do validation first then check if it is in the range which is defined in PHP data service TankService.getExpansionCoefficientRange ("0.000414~0.001674" as default)
	Note: DB patch is required for changes in view GUI_TANKS.

* BZ: [OM5K-3404] The tick box 'Ignore DCS info checks' is added in Load Schedules screen, and will become visible when the trip is Active|Ended|Delivery_ok and DCS flag (SITE_EXTERNAL_BLENDING_ALLOWED) is on ('Y') in SITE_CONFIG. The parameter 'dcsmode=on' will be passed to BOL/LOAD_REPORT data service if this box is ticked.

* BZ: [OM5K-3417] In the screen 'Drawer Products', the following changes are applied:
	1. A new column 'RAT_HOT_MAIN' is added in table RATIOS and included in view GUI_PRODUCT_ITEMS
	2. Display it as column 'Hot Main' in ratios list and editable
	3. Add a new column 'Check Hot Litres' in ratios list (from Base Product, view only)
	4. When adding a new base product into ratio list, dynamically check the hot temperature flag (column 'Check Hot Litres') of all base products and refresh the tick box 'Check Hot Litres' of drawer product. (Note: the value of column 'Ratio' must be non-ZERO, then system will take this base product into consideration)
	5. User can only tick one Base product as Hot Main or tick none.
	Note: DB patch is required for changes in table RATIOS and view GUI_PRODUCT_ITEMS.

* BZ: [OM5K-3418] A new setting 'HOT_LITRE_SFL_FACTOR: Site-wide percentage to be used to reduce preset for hot litres, valid range [0.0 - 1.0]' is:
	1. added in table SITE_CONFIG
	2. editble on the screen 'Site Configuration' - tab 'General'
	3. assured that the value must be in 0.0~1.0
	Note: DB patch is required for 'HOT_LITRE_SFL_FACTOR' in table SITE_CONFIG.



Bug Fixes:

* BZ: [OM5K-3305] When modifying the user name and/or department in 'User Profile' dialog, it re-use the Personnel data service, so we need to convert three expiry dates of the Personnel to ISO format to avoid the DB error.

* BZ: [OM5K-3362] In the drawer products screen, prompt 'The drawer product density is blank' if the density field is empty and 'Check Hot Liters' is ticked, and prompt 'The drawer product hot temperature is blank' if the hot temperature field is empty and 'Check Hot Liters' is ticked.  
Make these two fields mandatory if 'Check Hot Liters' is ticked.

 

Known Issues:
* BZ: [OM5K-3361] Related to [OM5K-3063]
* BZ: [OM5K-3372] Related to [OM5K-3270]




********************************************************************************************************************** 
Version: 9.06.02.02
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[16/02/2017]
********************************************************************************************************************** 

New Features:
* BZ: [OM5K-2907] In Load Schedules screen and its sub-screens, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-2946] In Date Time Calendar and Range components, replace hard-coded label with locale variable and define its multilingual contents in locale files.
* BZ: [OM5K-2947] In User Profile Dialog component, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-2948] In Password Changer component, replace hard-coded label with locale variable and define its multilingual contents in locale files
* BZ: [OM5K-2949] In Seal component, replace hard-coded label with locale variable and define its multilingual contents in locale files. The Seal dialog is part of Load Schedules screen
* BZ: [OM5K-2959] In Equipment Types screen, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-2960] In all Compartment components, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
                   The various Compartment components are used to view, create and update vehicle structure in Equipment Types, Equipment List and Tanker List screens.
* BZ: [OM5K-2950] In Manual Transactions screen, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-2951] In Movement Nomination screen, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-2952] In Movement Reasons screen, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-3047] In Special Movement screen, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-3050] In Companies screen and Company Special Action dialog, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-3048] In Movement Nomination Schedules screen, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-3049] In Movement Nomination Transactions screen, replace hard-coded label with locale variable and define its multilingual contents in locale files. 
* BZ: [OM5K-2769] For the new screen Audit,
				a. Add a new ICON for the widget
				b. Add a new PHP data service
				c. Add a new site configuration SITE_AUDIT_SCREEN_ENABLED to turn on/off the screen
				d. Add a new site configuration SITE_DEFAULT_DATERANGE_AUDIT to control the default number of audit records.
* BZ: [OM5K-3085] Define two global labels in SITE_CONFIG: SITE_SAFEFILL_LABEL and SITE_CAPACITY_LABEL. Use the labels to represent compartment safefill and capacity if they are blank ("Schedule Limit", "SFL"), otherwise use the existing multilingual texts ("Safe Fill", "Capacity"). This new feature will affect the following screen:
				a. Equipment Type
				b. Equipment List
				c. Tanker List
				d. Load schedule Screen
* BZ: [OM5K-3064] In the Companies, Special Actions, Supplier Company special Actions TAB there will be a new switch and a new value field.
				a. Link to second Drawer Company ¨C Yes/No (user selectable)
				b. Linked Drawer Company ¨C
					When "Link to second Drawer company" = No then Linked Drawer Company is blank and greyed out, no user input possible
					When "Link to second Drawer company" = Yes then Linked Drawer Company is available and manditory for input by dropdown list from existing Companies that are drawers only
				Note: the visibility of these two fields will be controlled by the value of 'SITE_EXTERNAL_BLENDING_ALLOWED' in table SITE_CONFIG.
* BZ: [OM5K-3061] In Base Products screen, following changes have been done:
				a. Add a checkbox field to manage the hot volume flag in both Grid list and Create/Edit Form
				b. Add a new classification called "Bitumen", this is selectable as per other Base Product Classifications
				c. Add a new ASTM Table D4311 ¨C Standard Practice for Determining Asphalt Volume Correction to a Base Temperature. This table takes Density@15C and temperature as inputs and has VCF as an output. This is selectable as per other ASTM table values.
				Note: the visibility of item a, b, and c will be controlled by the value of 'SITE_LOAD_SAFEFILL_CHECK_BY_HIGHTEMP' in table SITE_CONFIG.
* BZ: [OM5K-3062] In Drawer Products screen, following changes have been done:				
				a. A tickbox Check Hot Litres was added.
					i.  Not User settable
					ii. This will automatically be checked if any Base Products has the flag "Limit Preset Mass QTY to Capacity @ Hot temperature" to Yes
				b. A text field Drawer Product Density @15C [Default: 1000 kg/m3] was added.
					i.  If Check Hot Litres then the User can manually add or modify this value. Note this value is only used for estimating the HOT litres
				c. A text field Drawer Product HOT Temp [Default 15C] was added.
					i.  If Check Hot Litres then the User can manually add or modify this value. Note this value is only used for estimating the HOT litres
				d. If none of the Base Products in this recipe have the flag set then these fields are not editable and they are greyed out and set to default values as shown here
					i.  Drawer Product Density @15C (default = 1000 kg/m3@15C)
					ii. Drawer Product HOT Temp (default = 15C)
				e. Drawer Product Density @ 15C should allow values between 500.0 and 1500.0 Kg/m3; Drawer Product HOT Temp should allow temperatures of -25C to 275C
				Note: the visibility of item a, b, and c will be controlled by the value of 'SITE_LOAD_SAFEFILL_CHECK_BY_HIGHTEMP' in table SITE_CONFIG.
* BZ: [OM5K-3063] In Drawer Products screen, following changes have been done:				
				a. A tickbox "Link to second Drawer company" was added.
				b. A Combobox "Linked Drawer Company" was added.
				c. A Combobox "Linked Drawer Product" was added.
				d. For a NON Linked Drawer (refer to OM5K 3064) the check box is not ticked and the Linked company is greyed out and Linked Prodcut is hidden.
				e. For a Linked Drawer (refer to OM5K 3064), the check box will be enabled and 
					i.    if check box ticked, the Linked company is enabled and the Linked Drawer Product is visible and enabled
					ii.   if check box is not ticked, the Linked company is still grayed out and Linked Drawer Product disappears.
					iii.  if Linked Drawer Company has no value, it will use the one in Company Special Actions as default.
					IV.   if Linked Drawer Company is changed, the list of Linked Drawer Product will change too. User can pick from a dropdown list of Drawer products available
				Note: the visibility of item a, b, and c will be controlled by the value of 'SITE_EXTERNAL_BLENDING_ALLOWED' in table SITE_CONFIG.
* BZ: [OM5K-3270] In Load Schedules screen, when clicking the button "View" beside "Transactions:", the popup window "Transaction Details" will appear. If the selected trip is Active and is a linked trip, the base product details will become editable. Currently user has to select a transfer record in "Transaction Product Details", modify its base products (Tank code, Qty amb/cor/kg, Density, TempC, API, TempF) and click button "Update" to save the change. If user clicks another transfer record before saving, the changes will be gone.


Bug Fixes:
* BZ: [OM5K-2936/2683] Define 'DDI_DELV_ITEMS' in locale language files and use it to prompt Delivery Item dropdown list in Delivery Details screen
* BZ: [OM5K-2630/2694/2604] In Load Schedules screen, make sure Driver List available if employer has been selected.
* BZ: [OM5K-2852] In the screens of stock recon modules, record the user, company, language into DATABASE SYS_CONTEXT when connecting to database, so the company-related records can be filtered by the specific company.
* BZ: [OM5K-2993/2994] In the Tank Status screen, reset the desnsity type for calculation so the system will auto-adjust the source value accroding to user's input.
* BZ: [OM5K-3087] In Special Movements screen, make the dynamic switch between http and https depending on server setting in PHP data service

 

Known Issues:
* BZ: In Delivery Details screen, the maximum length of vat id change from 10 to 13.






********************************************************************************************************************** 
Version: 9.06.01.13
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[06/10/2016]
********************************************************************************************************************** 

New Features:


Bug Fixes:
* BZ: [OM5K-2695] Warning message disappears if button 'Cancel' is clicked
* BZ: [OM5K-2762] Add the error message 'A manditory field allows any characters' for Partner Name validation
* BZ: [OM5K-2775] 
			The following tables are updated to support the changes in Message Set 13:
				1. PARTNER.PRTNR_NAME1/PRTNR_NAME2/PRTNR_NAME3/PRTNR_NAME4/PRTNR_NAME5, VARCHAR2(210)
				2. DB_ADDRESS_LINE.DB_ADDR_LINE, VARCHAR2(210)
				3. COMPANYS.CMPY_NAME, VARCHAR2(300)
				4. DELV_DETAILS.DD_INSTRUCTION/DD_LPG_REMARK, VARCHAR2(420)
				5. DELV_DETAILS_ITEM.DDI_ITEM_DESC, VARCHAR2(300)
			The following screens are updated to support the changes in Message Set 13:
				1. In 'Companys' screen, the length of 'Company Name' field has been changed to 300 bytes.
				2. In 'Partners' screen, the length of all five 'Partner Name' fields has been changed to 210 bytes.
				3. In 'Addresses' screen, the length of column 'Address Line Text' in 'Address Line' grid has been changed to 210 bytes.
				4. In 'Delivery Details' screen, the length of field 'Instruction' and 'LPG Remark' has been changed to 420 bytes, 
				the length of column 'Product Name' in 'Delivery Details Item' grid has been changed to 300 bytes.
			Add the generic function to control the validation type and length of certain fields and grid columns in above screens.
* BZ: [OM5K-2782] 
		In company special action dialog, when it is a new company, the gate-permission-related settings will be created for the first time and journaled as 		
		"Person [user name(user code)] created a company configuration [Company:cmpy code][Key:config code][value:config value] successfully in screen [Company Configuration]. Record key: [cmpy code][config value]."
* BZ: [OM5K-2785] 
		In the form 'Update Status' of Tank Status screen, check the product type before doing calculation, if it is additive, std/refer density will be always same as the density (for compensation), then convert between std/ref density and API.
* BZ: [OM5K-2786] In Calendar component, refresh the dateText field whenever the time fields are on/off.
* BZ: [OM5K-2836] In pop up Transaction Details screen, get the username, password, database schema, port from the apache server variables in the PHP getBase data service.
* BZ: [OM5K-2843] 
        In Base Products screen, remove the fields of 'Ref Temperature'. The value and unit of Ref Temperature will be determined by the selection in 'Ref Temp Spec'
		In Tank Status screen, always use the server setting of VSM_COMPENSATION_PT as Reference Temperature (Previously the Ref Temp in Base Product was used if it has one)
* BZ: [OM5K-2846] 
		In Transaction List screen:
			1. The grid 'Transaction Details' and 'Meter Details' will be cleared if user does not select a record or undoes the selection in main grid.
			2. If both 'Transaction Details' and 'Meter Details' are visible, they will be cleared after user performs the filtering.
		In Transaction Details popup in Load Schedules screen:
			1. The grid 'Transaction Details', 'Meter Details' and 'Base Product Details' will be cleared if user does not select a record or undoes the selection in main grid.
			2. The grid 'Transaction Details', 'Meter Details' and 'Base Product Details' will be cleared if no records list in main grid.
			3. New feature: when TAB 'Base Product Details' is clicked, if no transfer is selected, use the first transfer to get Base details and display.
* BZ: [OM5K-2850] 
		In On Demand Reports screen, check the user's employer, if it is site manager company, display 'ALL' plus other report owners in Supplier list; if it is not site manager, display its own only.
* BZ: [OM5K-2851] In Profile screen
			1. When retrieving the list from DB, the front-end can get it as an array or as a serialized string, which is controlled by a flag 'jsonon' in PHP data service. This flag got missing when retrieving list for Report Source in Profile screen. It is fixed now by returning array.
			2. When creating a new Profile, use dropdown list for the 'Report Source' to select the available jasper source file. The list of files is found from the report folder in server.
			3. When updating or deleting a Profile, use text field for the 'Report Source', so the record can still be updated or deleted if the source file got missing in server folder.
			4. Add a new column in grid list to show user if the jasper files exist in server folder.
* BZ: [OM5K-2854] In Transaction Details screen, 
			sort the transfer details in ASC order by transfer id; 
			sort the base product by its class in DESC order
* BZ: [OM5K-2855] In Profile screen, we can configure the length and validation type of 'Report Name' and 'Description' by the following settings in the 'ScreenFormColumnService.php'
			$str .= "|report_name,alphanumericslashbrackets,80";
			$str .= "|report_desc,alphanumericslashbrackets,100";
			Front-end will dynamically change the field length and validation when create/update form opens.
* BZ: [OM5K-2856] 
			In Drawer Products screen, due to the difficulty of CGI in handling Thai characters, a function is developed in PHP to update the product name after CGI created or updated other details of the drawer product. Because the product company was not used as the key when updating, the name of products having same product code will be changed simultaneously. Fix it by using both product company and code as the key when updating product name.
			In Tank Configuration screen, similar bug may exist if more than one terminal used in one omega system. Use both tank terminal and tank code as the key when updating tank name.
* BZ: [OM5K-2859] In Load Schedules screen, check if there is record in data grid and selected, otherwise, do not select any item in the driver list when clicking Create.


Known Issues:






********************************************************************************************************************** 
Version: 9.06.01.13
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[16/09/2016]
********************************************************************************************************************** 

New Features:



Bug Fixes:
* BZ: [OM5K-2627] On Partners screen, warning message is displayed in the middle.
* BZ: [OM5K-2724] In Open Order Listing screen, add callback functions for visible dropdown lists, so their selections can be restored if data loading finishes after the edit form is opened.
* BZ: [OM5K-2725] Add a default value definition for column TRANSP_EQUIP.EQPT_LOAD_TYPE, so DB will automatically assign 'A' (Any) to the column if no value from the outside-DB process when creating or updating the equipment. 
* BZ: [OM5K-2727] In Company Special Actions, move the following fields to TAB 'Supplier Company Settings'
					Maximum Loadable Weight Check at DLI (Y/N)
					Validate Load Schedule Availability at DLI (Y/N)
					Tolerance in percentage (%) of the Total Load Vehicle Weight (0-20)
					Load Authorization at DLI (Y/N)
* BZ: [OM5K-2728] Change the description to 'Load Authorization at DLI' in Company Special Actions.
* BZ: [OM5K-2731] The following logics are applied in Company Special Actions for configurations stored in table COMPANY_CONFIG:
		1.    Check if the configuration exists for the company, if not, do CREATE action
		2.    If existed, check if the value of configuration has been changed. If changed, do UPDATE action, otherwise, no DB action
With this logic, journal will appear as:
		1.    If this is a new company just created or a company does not have these four settings at all, no matter if user changed their values or not, as long as they clicked button Update, system will create four settings in COMPANY_CONFIG for that company, so there will be four journal message of ¡°¡­create¡­.. successfully¡±
		2.    After the actions in 1, any operations later will be journaled only if the value has been changed.
* BZ: [OM5K-2744] When writing journal, replace [] with [NULL]. This solution fixes any records which were updated from NULL or into NULL.
* BZ: [OM5K-2747] On Personnel screen, when user locks a personnel, journal is recorded as "Person [login user name(code)] locked user [personnel code] successfully in screen [Personnel]. Record key: [personnel id][personnel code]."
* BZ: [OM5K-2743] The following changes are done in Order Listing screen
	1. In php service 'ScreenGridColumnService.php', 
		The following settings will display order time, delivery time, expiry time in date+time format in data grid list
			$str .= "|1,order_ord_time,DateTimeRenderer";
			$str .= "|1,order_exp_time,DateTimeRenderer";
			$str .= "|1,order_dlv_time,DateTimeRenderer";
		The following settings will display order time, delivery time, expiry time in date format in data grid list
			$str .= "|1,order_ord_time,DateRenderer";
			$str .= "|1,order_exp_time,DateRenderer";
			$str .= "|1,order_dlv_time,DateRenderer";
		The following settings will display order time, expiry time in date+time format in data grid list, but hide delivery time.
			$str .= "|1,order_ord_time,DateTimeRenderer";
			$str .= "|1,order_exp_time,DateTimeRenderer";
			$str .= "|0,order_dlv_time,DateRenderer";
	2. In php service 'ScreenFormColumnService.php', 
		The following settings will enable Time sections in the calendar for order time, delivery time, expiry time field in create/update form
			$str .= "|order_ord_time,TBD,1,1";
			$str .= "|order_dlv_time,TBD,1,1";
			$str .= "|order_exp_time,TBD,1,1";
		The following settings will disable Time sections in the calendar for order time, delivery time, expiry time field in create/update form
			$str .= "|order_ord_time,TBD,0,1";
			$str .= "|order_dlv_time,TBD,0,1";
			$str .= "|order_exp_time,TBD,0,1";
		The following settings will enable Time sections in the calendar for order time, expiry time field in create/update form, but disable it for delivery time 
			$str .= "|order_ord_time,TBD,1,1";
			$str .= "|order_dlv_time,TBD,0,1";
			$str .= "|order_exp_time,TBD,1,1";

Known Issues:



********************************************************************************************************************** 
Version: 9.06.01.13
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[09/09/2016]
********************************************************************************************************************** 

New Features:
* BZ: In Base Products screen, manage Reference Temperature Spec in CREATE/UPDATE form and paging list. 
      The value of Reference Temperature Spec can determine the value of ref temp and ref temp unit if user hasn't enter any.



Bug Fixes:
* BZ: [OM5K-2649] In Order Listing screen, use callback function to re-populate the supplier list box after supplier data arrived in front-end.
* BZ: [OM5K-2694/2604] In Load Schedules screen, make sure Driver List available if employer has been selected.
* BZ: [OM5K-2695] Give the Validation Group component a parent screen to stand on, so all the warning message will display inside the parent screen.
* BZ: [OM5K-2698] Add a new flag in both back-end and front-end to determine if the array should be encoded/decoded by JSON.
* BZ: [OM5K-2699] All Date Calendars can be closed by clicking mouse outside of them


Known Issues:
* BZ: In Load Schedules screen, if user selects a finished trip and views its transactions, the data of Base Product Details are always blank. It is caused by HARD-CODED database name 'OML5K'. 
      Fixed after using server-defined DB variable.



********************************************************************************************************************** 
Version: 9.06.01.13
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[02/09/2016]
********************************************************************************************************************** 

New Features:
* BZ: Add a new VCFManager.as to calculate and convert API, Density, VCF at various temperature values and units.
* BZ: Display API and TEMP(F) in TranBase details and Transfer details grid in screens of 'Transaction List' and 'Transaction Popup'.
* BZ: Make screens of 'Transaction List' and 'Transaction Popup' multilingual.
* BZ: In Base Products screen, user can manage Reference Temperature value&unit and Correction Method in CREATE/UPDATE form
* BZ: In Tank Status screen, 
		1. Display API@60F, Density (Reference Density), Standard Density in listing grid
		2. Display both TEMP_C and TEMP_F in column Observed Temperature
		3. Try to get the reference temperature from BASE product first, if failed, get it from the server setting
		4. Display Std Density@15C/59F, Density@RefTemp, API@60F in Tank Status Form
		5. User can calculate or input Std Density@15C/59F, Density@RefTemp, API@60F in Tank Status Form, then update the changes.


Bug Fixes:
* BZ: [4879] On Load Schedules screen, Check the value of source type, and treat it as ZERO (Unknown source) if it is out of range (0 - 4).
* BZ: [4877] On Addresses screen, When entering the CREATE form, disable all three buttons (Add/Remove/Edit Line). Enable the 'Add Line' only when user enters address code.
* BZ: [4033] On Transactions Listing screen, enable the 'Export CSV' button
* BZ: [4892] In Load Schedules screen, change variable name schd_sold_to__num to schd_sold_to_num, so the front-end can retrieve and display the Sold To 
* BZ: [4994] In Load Schedules screen, add an extra blank column at the end of compartment list grid, so user can adjust the width of column 'Ship To'.


Known Issues:
* BZ: User has to click OK or date-range icon to close the DateRange popup, otherwise it will stay on the screen. Now it will close itself if user clicks mouse outside of popup.
* BZ: Turn on Archive Trip functionality in Load Schedules screen
* BZ: In Transaction List screen, the SQL selects the company types by filtering their English names which will return nothing if language is not English. 
      Change the SQL to filter by company type IDs.
* BZ: Metering-related columns were added to TRANBASE but values of these columns will be blank in TRANBASE if records were written before the DB patches. 
      Change the GUI_METER_DETAILS to use TRANSFERS metering if TRANBASE metering info do not exist. Currently metering info got missing in Transaction List screen for some old data.
	  



********************************************************************************************************************** 
Version: 9.06.01.13
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[08/08/2016]
********************************************************************************************************************** 

New Features:
* BZ: In Company Special Actions dialog, add a new column "Print" to decide if BOL/DN of a certain template should be sent to printer in TAB 'Transportation Documents'
* BZ: In Company Special Actions, add the functionality to update (delete first, the re-create) the following new configuration for a company:
		4. A drawer company can do authorization at gate (Y/N)
* BZ: User can enter Delivery Details screen from either Load Schedules screen or Open Order Listing screen. In this screen:
	1. User can find the list of delivery details belong to a particular supplier, trip/order, and load type
	2. User can create and update the delivery details and items. (there might be possibility that user need add extra items to existing delivery detail, or update some info, more restrictions might be required later, but at moment it is easier to just enable to create and update)
	3. User can delete the delivery details if they haven't been used for printing.
* BZ: User can add new BOL template or delete existing ones while creating new delivery detail for same (supplier, trip/order, load type).
* BZ: Move 'Sold To' and 'Ship To' fields into line two in Delivery Detail form
* BZ: When creating a delivery details, auto populate the items with trip/order compartments/products
* BZ: In Equipment Type screen, add the new type Rigid Ship. The availability of this type is controlled by a Site Configuration: SITE_RIGID_SHIP_AVAILABLE.
* BZ: Make certain text fields available to handle multilingual texts in the following screens, and the validation type and maximum length are configurable in a PHP service (in the format of "field, validation, maxlen")
		screen: "ADDRESSES"
			"|address_code,document,40";
		screen: "BASE_PRODUCTS"
			"|base_name,document,40";
		screen: "COMPANIES"
			"|cmpy_nameTextInput,document,49";
		screen: "DRAWER_PRODUCTS"
			"|prod_name,document,40";
		screen: "EQUIPMENT_LIST"
			"|eqpt_title,document,40";
			"|eqpt_comments,document,800";
		screen: "EQUIPMENT_TYPES"
			"|etyp_title,document,40";
		screen: "PARTNERS"
			"|partner_name1,document,35";
			"|partner_name2,document,35";
			"|partner_name3,document,35";
			"|partner_name4,document,35";
			"|partner_name5,document,35";
		screen: "PERSONNEL"
			"|per_nameTextInput,document,49";
			"|per_departmentTextInput,document,16";
			"|per_comments,document,800";
		screen: "TANK_CONFIGURATION"
			"|tank_name,document,30";
		screen: "TANKER_LIST"
			"|tnkr_name,document,40";
			"|remarks,document,800";


Bug Fixes:
* BZ: [4832] On Drawer Products screen, dynamically set the value of column PRODUCTS.PROD_IS_BLEND in php service by SQL, with the following rules: set to 'Y' if at least two non-additive base products found in product ratios, otherwise set to 'N'
* BZ: [4832] On Load Schedules screen, dynamically attach the '&supermode=on' to URL for BOL view/print if checkbox of 'ignore tolerance check' is ticked
* BZ: [4849] Delete the delivery BOL template using the same primary key of delivery DN template.
* BZ: [4850/4851] The following changes have been made in Delivery Details screen:
		1. make the form fields 'Supplier', 'Trip/Order No', and 'Load Type' read only
		2. make the following grid columns read only:
			a. 'Product Code', 'Item Number', 'Unit ID', and 'Unit of Measure' in grid 'Delivery Details Item'
			b. 'DN Template' in grid DN Template List
			c. 'BOL Template' in grid BOL Template List
		3. validate the following grid columns:
			'Item Category':      must be number, 4 digits.
			'Compartment':        must be number, 2 digits.
			'Quantity':           must be number, 9 digits.
			'Excise License':     must be number, 15 digits.
			'Reference Document': must be number, 10 digits.
			'Site Capacity':      must be number, 10 digits.
			'Product Name':       string type, 36 bytes.
			'Duty Code':          string type, 20 bytes.
			'Tank Code':          string type, 20 bytes.
		4. Special managements BOL templates:
			a. When creating another new delivery detail on same supplier, trip/order and load type, add the new BOL templates to existing ones.
			b. When deleting a delivery detail, if there still are one or more delivery detail existed under same supplier, trip/order and load type, do not delete their BOL templates. 
			c. When all delivery details of a (supplier, trip/order and load type) have been deleted, delete the BOL templates too.
* BZ: [4855] Use the delivery number, supplier, trip/order number, and load type to check if the delivery details have been used in printing. If used, deletion is not allowed.
* BZ: [4862] In Equipment List and Tanker List screen, whenever the user select the equipment type, let the system wait till the creation of Eqpt/Tanker Structure Component fully completed then assign the eqpt/tnkr data to the component. This will properly display the eqpt/tanker structure at any time.


	

Known Issues:
* BZ: Partner and Partnership screens changed based on new design of DB tables structure, in which a partner can be identified now on its supplier (maybe other company types later), code, and type. A default partnership (partner's supplier, null customer, partner's id) will be created automatically whenever a new partner is created
* BZ: Do not use PHP to convert between UTF8 and GB2312 characters, and let DB and Apache server do it automatically. This will make Chinese input/output correctly






********************************************************************************************************************** 
Version: 9.06.01.13
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[01/07/2016]
********************************************************************************************************************** 

New Features:
* BZ: add two more lights for the source of schedule in load schedules screen
			1.       Extend the enum value for field SHLS_SRCTYPE in table SCHEDULE.
				0 - invalid   (NULL value in table will be treated as 0 as well.)
				1 - manual from local (i.e. via frontend)
				2 - auto from host (i.e. via hostcomm)
				3 - open order  (schedule generated from open order)
				4 - system (schedule generated from Standalone or from Special order)
			2.       Frontend: Source column in Load Schedule screen changes from 3 lights to 5 lights.
				Prompt:  
				Light 1) Received from Host			(value of 2)
				Light 2) Created manually			(value of 1)
				Light 3) Created from Open Order	(value of 3)
				Light 4) System						(value of 4)
				Light 5) Unknown source				(value of 0 or NULL)



Bug Fixes:
* BZ£º[4795] adjust the width of four fields so the filter form is displayed properly
* BZ: [4813/4823] Make sure that any click of widget panel will call the function once to open the screen, so the pop up dialog box can be removed properly
* BZ: [4815] change the text to 'Show Live Journal results with the latest at bottom' in table SITE_CONFIG for CONFIG_KEY 'LIVE_JOURNAL_SORT'
* BZ: [4811] implement Garuda.ttf and Garuda-Bold.ttf to the following components:
		1. DropDownList
		2. ComboBox
		3. DefaultGridItemRenderer
		4. TextInput
		5. Label
		6. TextArea
	When font style is normal or bold, the above components will use thai fonts. If font style is italic, the system will still use default English font.
* BZ: [4828] Exclude any records related to additive and injector in PHP data service.
	

Known Issues:




********************************************************************************************************************** 
Version: 9.06.01.13
Tag: N/A
Date Tagged:[N/A]
Branch: Omega-9-06-01-13-BRANCH-THAI_CHARS
Date Built:[07/06/2016]
********************************************************************************************************************** 

New Features:
* BZ: In Site Configuration - General, add the functionality to update site amb/std/kg quantity adjustment values.
* BZ: In Company Special Actions, add the functionality to update (delete first, the re-create):
		1. Maximum Loadable Weight Check at DLI (Y/N)
		2. Validate Load Schedule Availability at DLI (Y/N)
		3. Tolerance in percentage (%) of the Total Load Vehicle Weight (0-20%)
* BZ: In Equipment Type screen, add the new type Rigid Ship. The availability of this type is controlled by a Site Configuration: SITE_RIGID_SHIP_AVAILABLE.


Bug Fixes:
* BX: [4558] adjust the starting/stopping position of warning messages according to whether these messages belongs to the screen or a pop up window, so the effects of displaying messages always look similar.
* BZ: [4714] In screen Delivery Details, use validation type 'document' on most text fields so they would allow maximum charset
* BZ: [4754] In screen Partnership, set address text column width to 300.
* BZ: [4767] Replace hard-coded Multilingual text with database messages so the PHP service will not be affected by the language settings of Oracle database, and the gate permission rules can be displayed successfully.
* BZ: [4768] Remove the focus from any text field if user has pressed ENTER key to start the filtering, so every ENTER key will lead to one-time-filtering.
				The fix has been done in the following screens:
					Customers->Addresses
					Customers->Partners
					Printer Configuration->Physical Printers
					Access Control->Gate Permissions
					Access Control->Site Access Devices
* BZ: [4769] In Gate Permission screen, the following has been changed:
				1. add ANY in eqip type list
				2. Force user to select ANY or a particular equp type if permission rule is Equipment
				3. Force user to select ANY or a particular personnel role if permission rule is Personnel
				4. The dropdown list will be dynamically adjusted when user clicks them in various rows, to hide the eqpt type(s) or rols(s) already used in other permission rules.
				5. For Equipment Permission, blank value in DB = ANY
				6. For Personnel Permission, 999 = ANY.
					


Known Issues:
* BZ: In screen Partners, use validation type 'document' on five Parter Name text fields so they would allow maximum charset
* BZ: In screen Partners, the address filter did not work before.
* BZ: In screen Addresses, use validation type 'document' on address code text field so it would allow maximum character set
* BZ: In Offline Messaging screen, numeric fields will be saved as blank instead of ZERO if user did not enter anything.

* BZ: Allow the user to enter any characters in text filters in the following screens:
		Base Products
		Tank Configuration
		Partners
		Addresses



********************************************************************************************************************** 
Version: 9.06.01.13
Tag: Omega-9-06-01-13-BRANCH-TRNSPRT_DOC-05
Date Tagged:[03/05/2016]
Date Built:[03/05/2016]
********************************************************************************************************************** 

New Features:
* BZ: Add the field "Company Address" and the button "Addresses" in create/update form in screen "Companies" , user can manage addresses and link it to a company.
* BZ: In screen "Partnership", list supplier companies only and set the login-user's company as the default.
* BZ: In screen "Partners", change the layout and put button "Addresses" beside the address list, and make button available in create form too. 
* BZ: Convert Site Access Devices screen from ML to FLEX
* BZ: Convert Gate Permissions screen from ML to FLEX, and make it configurable if expiry dates require validation.
* BZ: Change partner type for Ship To from 'RE' to 'WE'.
* BZ: 'Customer PO' field in Delivery Details could be alphanumeric.



Bug Fixes:
* BZ: [4672] In tab "Transportation Documents" of company special actions, clear "Template Identifier" filter when button "Clear" is clicked
* BZ: [4696] In Load Schedules screen, disable the BOL Print button after it is clicked, and re-enable it after printing action is finished (either in success or failure).
* BZ: [4701] Let the system set width dynamically so the login window will be always centered.
* BZ: [4707] when retrieving partner information based on its supplier only and disregarding the relevant customer information, so a unique partner can be found for each delivery detail.
* BZ: [4712] In Delivery Details screen, change Delivery Type from Dropdown list to Text Field
* BZ: [4713] In Delivery Details screen, force the screen state into "detail" when form opened after user clicks in grid list, so all fields will be view only
* BZ: [4714] In Delivery Details screen, disable all the validations
* BZ: [4717] In offline messaging screen, make status area non-editable
* BZ: [4719] In company special actions, save the changes but do not close dialog box when button Update is clicked.
* BZ: [4720] In Offline Messaging screen, added the enhancements as suggested in bugzila
* BZ: [4721] In Offline Messaging screen, 
			1. Fields will be checked before saving. Error messages may pop up which lists all compulsory but blank fields, and no file will be generated in this case.
			2. Form will not be cleaned if file is generated successfully.
			3. User can clear the form by click button Clear Message.
* BZ: [4723] In Offline Messaging screen, Left-Pad 0 to the fields having Number(x) type where x>=6
* BZ: [4737] Use DB class to manage the PHP service Looksup.lookupOrderCustomer in Load schedules screen.
* BZ: [4733] Change Partner List to Partnership List in screens Load Schedules and Order Listing.
* BZ: [4733] Fixed following parts in OfflineMessaging screen:
			1. Change Status to Log, Clear Output to Clear Log.
			2. Change prompts for button of Refresh Template list, Load Template, Clear Message
			3. Allow number of BOL/DN templates to be 0
			4. Pat number of templates/deliveries/delivery item with '0'
* BZ: [4731] Use 'POST' action in HttpService to get the template.
* BZ: [4738] In Order Listing screen, disable the whole filter bar when the screen is in the state of CREATE, EDIT or DETAIL.
* BZ: [4739] In OfflineMessaging screen:
			1. All numeric field allows 0-9 only and pad the '0' at left.
			2. All text field has no restrict on characters any more, and pad ' ' at right.
* BZ: [4742] In Delivery Details screen, make all text fields editable=false, enabled=true, so they will have brighter graphic appearances.
* BZ: [4742] In OfflineMessaging screen, allow number of BOL/DN templates to be ZERO, refer to he fix in bug 4733.
* BZ: [4746] In Company Special Actions, check the current state, if it is Transportation Documents, just display the successful message for once when updating.


Known Issues:
* BZ: The deletion should be marked as success if the target record does not exist in database. Previously it returned as error and stopped next step of DB action. Fixed in DB.class.php in both phpservices and amfservices.
* BZ: In screen Addresses, if deletion of address failed, the address lines should be restored. Previously DB address code was restored but its lines gone. Fixed in Addresses PHP service.
* BZ: In popup Partner list, display partner's supplier company and customer too, because same partner might link to one supplier or that supplier with many customers.



********************************************************************************************************************** 
Version: 9.06.01.12
Tag: Omega-9-06-01-12
Date Tagged:[23/02/2016]
********************************************************************************************************************** 

New Features:
* BZ: Display company name and type in Special Actions Dialog title bar.
* BZ: The size of Special Actions dialog can be changed when user changes TAB.
* BZ: Expand the size of DN/BOL template  configuration screen
* BZ: Add "Template Identifier", "Trigger Point (%)" and "Trigger Point (Vol)" in template screen. Trigger point values are editable only for DN templates. "Company + Identifier + Template Type" must be unique.
* BZ: Disable the quantity field for Trigger Point on BOL/DN template setting.
* BZ: On Partnership screen make it possible to select multiple partners to assign to the supplier or Customer company
* BZ: On Partnership screen make it possible to delete multiple partners assigned to the supplier or Customer company
* BZ: On Partnership screen, display Partner Seq, Code, and Name in Partners drop down list 
* BZ: Replace Partner Code with Partner Seq as an unique key for a partner on Partners and Partnership screens.
* BZ: Screen Product Groups was converted from ML to FLEX style
* BZ: New screen Compliance Messages was created and accessible by a button on the top of screen Product Groups. The user can access the screen of Compliance Message Groups by clicking a button in Edit Form of screen Compliance Messages. 
* BZ: New screen Compliance Message Groups was created and accessible by a button on the top of screen Product Groups. 
* BZ: In the screen of Compliance Message Groups, the user can add multiple compliance messages to one group, and delete multiple compliance messages from one group.
* BZ: The deletion of a product group will fail if it is used by either a Drawer Product or a Compliance Message Group.
* BZ: The deletion of a compliance message will fail if it is used by a Compliance Message Group.
* BZ: A flag "Is Compliant" was added to the screen Drawer Products, and it can be viewed in Grid list and managed in edit form.
* BZ: In screen Addresses, add ability to search on address details.
* BZ: In screen Addresses, move the address type column in address lines datagrid to left.
* BZ: Add a new screen Delivery Details, in which the user can view the list of Delivery Details, List of items of a delivery detail, the DN templates of a delivery Detail, and Delivery BOL templates.
* BZ: Add button Delivery Details in Trip Details form in Load Schedules, which can lead to screen Delivery Details.
* BZ: Add button Delivery Details in Order Details form in Order Listing, which can lead to screen Delivery Details.
* BZ: When system use Jasper to view/print BOL/DN, the label of 'BOL' can be changed to 'DN' or 'BOL&DN' by clicking mouse on it. The new parameter 'transdoc' is passed with value BOL, DN or BOL_DN, so Jasper process can print bol, delivery note or two document together.
* BZ: Add Offline Message pop screen, accessible from the button in Host Messaging screen.
* BZ: Use address template to manage create, and template can be copied from existing address details
* BZ: In Load Schedule screen, use site configuration to control if BOL and DN should be viewed/printed separately.
* BZ: Can set the site configuration with global function
* BZ: use DB seauence to decide next partner seq



Bug Fixes:
* JZ: [4646] Fixed Bug #4646. Now user can see all the email addresses without going to edit mode on email column.
* BZ: [4661] If the personnel is locked currently, quit the update form and refresh the personnel record after the user reset the password (the process of reset password will change status to active).
* BZ: [4655] The TAB title "BOL/DN templates" is changed to "Transportation Documents" in Special Actions dialog.
* BZ: [4662] Disable the filter toolbar when user is in the Create or Edit form. Re-enable it when it is in normal status.
* BZ: [4675] When system use Jasper to manage BOL/DN, hide the Export button in Trip Details form and the Print button in BOL-View form; otherwise, both buttons are visible and enabled.
* BZ: [4641] disable Site Configuration and Profile in header menu bar if any window pops up in Main screen; re-enable them when popup window closed
* BZ: [4607] when sorting equipment types by their IDs, treat equipment type id as integer instead of string. Also make it avaialbe to sort by compartment number.



Known Issues:
* BZ: Do validation to the following address lines in screen Addresses:
				type 5  - POSTAL_CODE: 	allow "A-Z,a-z,0-9, _-/\'&[]<>(){},."
				type 8  - TEL:			allow "A-Z,a-z,0-9, _-/\'&[]<>(){},."
				type 10 - EMAIL: 		use email validator
				type 11 - FAX:			allow "A-Z,a-z,0-9, _-/\'&[]<>(){},."
				other types:			no validation
* BZ: In Load Schedules screen, use HTTPService to call the server script to prepare the BOL/DN/LOAD_REPORT contents and start the animation Clock. When contents ready, stop clock, save contents to a temporary file on server, and then pass the url of this temp file to IFRAME in flex.
* BZ: In Partnership screen, use partner code instead of partner seq to decide the uniqueness of a partnership, it is to make sure that a company can not have more than one partner which share same partner code.
* BZ: If the schedule was created adhoc by open order loading, when the button of Delivery Details clicked, system goes to its parent open order delivery details by passing order number and order type to delivery details screen in Load Schedule screen.
* BZ: Change CHS to CSH for host data type in DorHistory screen.
* BZ: Make sure Trigger Point in BOL/DN templates will not exceed 100, and allow it to be NULL





********************************************************************************************************************** 
Version: Omega-9-06-01-09-BRANCH-TRNSPRT_DOC_01
Tag: Omega-9-06-01-09-BRANCH-TRNSPRT_DOC_01
Date Tagged:[14/12/2015]
********************************************************************************************************************** 

New Features:
* BZ: New TAB in Company Special Actions for BOL/DN templates management. Its on/off is controlled by new configuration 'BOL_DN_TEMPLATE_GUI_ENABLED'
* BZ: New configuration 'SITE_PRICING_ENABLED' is added to control the ON/OFF of pricing-related screens
* BZ: New screen Partners is created and its on/off is controlled by new configuration 'SITE_PARTNERSHIP_ENABLED'
* BZ: New screen Partnership is created and its on/off is controlled by new configuration 'SITE_PARTNERSHIP_ENABLED'
* BZ: Screen Addresses was converted from ML to FLEX style
* BZ: In Order Listing screen, a button is added beside the Sold To/Ship To field. The visibility of button is controlled by new configuration 'SITE_PARTNERSHIP_ENABLED'.  
      User can still type any non-partner string in text field of Sold To/Ship To. If they want to link fields to partner, they can click the button to pop up a Partnership list which has been already filtered by order suppler and partner type (sold to/ship to). Click button Cancel in pop up list will not change anything in text field of Sold To/Ship To. Click button OK in pop up list will assign the partner selected into text field of Sold To/Ship To or blank the text field if no selection in pop up list.
* BZ: In Load Schedule screen, a button is added beside the Sold To/Ship To field. The visibility of button is controlled by new configuration 'SITE_PARTNERSHIP_ENABLED'.  
      User can still type any non-partner string in text field of Sold To/Ship To. If they want to link fields to partner, they can click the button to pop up a Partnership list which has been already filtered by schedule suppler and partner type (sold to/ship to). Click button Cancel in pop up list will not change anything in text field of Sold To/Ship To. Click button OK in pop up list will assign the partner selected into text field of Sold To/Ship To or blank the text field if no selection in pop up list.


Bug Fixes:
* BZ: [4572] On Folio Summery screen, initialize the date range when the screen opens for first time.
* BZ: [4598] Add column KYA_EQPT_DESC in view GUI_ACCESS_KEYS so this column can be sorted in Identification Assignment screen
* BZ: [4592] Enable the validator when combobox is mandatory and disable the validator when combobox is optional. This change will affect all screens which use the component DKI_ValidatorComboBox.
* BZ: [4600] Adjust the field status properly when ID Assignment type or/and personnel role changed. Enable the validator if the field's 'required' flag is true; and disable the validator when the field's 'required' flag is false.
* JZ: Fixed the Current Folio(Home Widget) query problem. (Column TRSF_DELIVERED may not be the proper column to use.)

* BZ: [4591] Do not wrap the string of date or/and time when adjusting the column width of grid in relevant screens like Order Listing, Personnel, Tanker List, Equipment List...
* BZ: [4593] Change Expiry Time to Expiry Date on Order Listing screen
* BZ: [4596] On Site Configuration screen, the following changes have been done:
			1. Hide the NumericStepper of 'Auto complete loading process' in tab 'General', and return 'Y/N' when saving
			2. Reload the site configuration when opening the screen.
* BZ: [4597] About Link and Help link on top right corner of screen will work now
* BZ: [4606] Replace component s:DropdownList with components:DKI_DropdownList on Company Bay Movement screen.
* BZ: [4608] Use exact-match instead of partial-match when filtering by employer in Personnel screen.

	
Known Issues:
* BZ: The component DKI_DateTime allows one year backward, now has been increased to 10 years.




********************************************************************************************************************** 
Version: 9.06.01.11
Tag: Omega-9-06-01-11
Date Tagged:[16/11/2015]
********************************************************************************************************************** 

New Features:

Bug Fixes:
* JZ: [4581] Non-Site Manager Supplier can see other Company's Data.

* BZ: [4575] In Load Schedule screen, when updating the schedule record, check the trip status in PHP first, and invoke the CGI if it is a new trip, otherwise reject the changes.
* BZ: [4588] Make Host Data field optional in Load Schedule screen
* BZ: [4585/4573] In Load Schedule screen, set the interruptor=false when it was popped up from Order Listing screen so the paging can start, otherwise the system will think the paging ended already.
* BZ: [4574] In Order Listing screen, after coming back from popup screen, do the filtering according to the primary keys of original open order instead of filters, so system will always list one record - the original one.
* BZ: [4583] If it is a Live Journal screen, when closing it, check its currentState value, trigger the paging-stop event if it is in Search mode, otherwise do nothing.
* BZ: [4584/4587] In Live Journal screen, 
		1. use String(myobj) instead of myobj as String to assure of getting the latest sequence number correctly
		2. pass both the last sequence number and the current sequence number to avoid the duplication of data retrieval.
		

		
	
Known Issues:
* BZ: [4602] Do not display Base Allocation company in Drawer list, and hide all the drawer product belonging to this company in Drawer Products screen



********************************************************************************************************************** 
Version: 9.06.01.08
Tag: Omega-9-06-01-08
Date Tagged:[05/11/2015]
********************************************************************************************************************** 

New Features:
* BZ: Shell Brunei Host Comm DOR
		1. control field 'HOST Data' by setting 'SITE_DOR_NUMBER_VISIBLE' and 'SITE_DOR_NUMBER_EDITABLE' in SITE_CONFIG table
		2. control column 'Delv No' in tanker compartment details grid by setting 'SITE_CMPT_DOR_NUMBER_EDITABLE' in SITE_CONFIG table
		3. Control button 'Additional HOST Data' by setting 'SITE_DOR_HISTORY_AVAILABLE' in SITE_CONFIG table
		4. update 'HOST Data' using AMF service after schedule created or updated
		5. delete records in DOR_HISTORY before delete their parent schedule.
		6. new screen for managing 'Additional HOST Data' for schedule by compartment
			a. for a new schedule (by compartment), user can add/edit/delete the 'Additional Host Data' for each compartment.
			b. for all schedules, user can search and view the 'Additional Host Data' in each compartment.
* BZ: Enable 'Order Period' button in Order Listing screen, click to pop up Order Periods screen



Bug Fixes:
* BZ£º[4561] Set maximum length of tank group name to 16.
* BZ: [4558] Add parent screen to the validation group, so the system will put the warning message on top of the any screen which generates the error.
* BZ: [4546] The following changes have been done in Load Schedule screen:
		1. Show the fields 'Sold To' and 'Ship To' in header of form when it is a Pre-Order; Hide two fields in header when it is a Pre-Schedule but enable them in compartment grid.
		2. Restrict the fields 'Shift' and 'Priority' to accept '0-9' only
		3. Restrict the fields 'Sold To' and 'Ship To' to accpet 'A-Za-z0-9 _-' only
		4. When enter the value of 'Sold To' and 'Delv To' in compartment grid, any invalid characters not in 'A-Za-z0-9 _-' will be removed and the length will be remained <= 17.
* BZ: [4563] 
	Add comma, period to the list of special characters.
		The following field allows special characters including single quotation :
			Company Name: Expecting A-Z,a-z,0-9, _-/\\'&[]<>(){},.
			Personnel Name: Expecting A-Z,a-z,0-9, _-/\\'&[]<>(){},.
			Tanker Name: Expecting A-Z,a-z,0-9, _-/\\'&[]<>(){},.
			Equipment List Name: Expecting A-Z,a-z,0-9, _-/\\'&[]<>(){},.
		The following field allows special characters without single quotation 
			Tanker Code: Expecting A-Z,a-z,0-9, _-/\\&[]<>(){}.,
			Equipment Code: Expecting A-Z,a-z,0-9, _-/\\&[]<>(){},.
			Drawer Product Name: Expecting A-Z,a-z,0-9, _-/\\&[]<>(){},.
	Also use data binding in journalling so it can handle the special characters.
* BZ: [4556] Create AMF PHP service for personnel comments to replace the missing ZEND PHP service. Use the new AMF service in Personnel screen to display, create, modify the personnel comments.
* BZ: [4550] In Allocation screen:
		1. Replace searchCombo with DKI_ComboBox for Company filter so it will not refresh the list when selection is -1.
		2. Adjust the sequence of grid columns first, then load the data and enable the grid selection.
* BZ: [4535] In Open Order Listing screen, adjust the sequence of grid columns first, then load the data and enable the grid selection.


* MC: [4555] Do not refer to session object _SESSION['Default'] when trying to get site, user, company information in current session.








********************************************************************************************************************** 
Version: 9.06.01.07
Tag: Omega-9-06-01-07
Date Tagged:[xx/10/2015]
********************************************************************************************************************** 

Bug Fixes:
* BZ: [4510/4543]
		1. Use Data Binding in SQL operations to let PHP/ORACLE handle special characters in parameters by itself on Companies screen
		2. If user types in Plant Code or AOI, force to validate these fields before submitting; if user clears these fields, no validation.
* BZ: [4522/4540]
		1. Don't check the uniqueness of company code until user takes focus out of it, and re-check its uniqueness when submitting to create a new company on Companies screen
		2. Disable the button Save/Update when it is clicked, and re-enable it when the record was created/updated successfully or process interrupted due to errors on Companies screen. 		
* BZ: [4528] Update the view GUI_TANK_GROUP to pick up Group Base Cdoe, Group Base Product, Terminal Code, Terminal Name from group tanks. 
* BZ: [4527/4529]
The changes are done as follows:
1. add button "Clear Selection(s)" under the list of available tanks, and use toolTip - "Click to clear all selections or use CTRL+MOUSE_CLICK to make/cancel selection(s) in available tanks."

2. Change the button labels as follows:
      Delete - Delete Group
      Save   - Save Group
      Update - Update Group

3. When icon button 'CROSS' (between list and grid) enabled and hovered, toolTip is displayed: "Click to add the tank(s) to the grid and mark with icon 'CROSS', then click 'Save/Update Group' to make the addition to database permanently." 

4. When icon button 'TRASH' (between list and grid) enabled and hovered, toolTip is displayed: "Click to move the tank(s) marked with 'CROSS' from the grid back to the pool immediately, or to add/remove the icon 'TRASH' to/from the existing group member. Click 'Update Group' to make permanent changes. "

* BZ: [4520] Folio Scheduling Screen: Make the New Exception Field to accept A-Z, a-z, 0-9, spaces, _, and - only.
* BZ: [4525] On Equipment Type screen, hide the edit button if column SEAL is invisible. Show it when column SEAL visible. The button mode is controlled by the value of SITE_USE_SEAL in table SITE_CONFIG.
* BZ: [4523/4524] SearchCombo option list goes back to original size if value typed does not find match on Tank Group screen. 
* BZ: [4507] Do validation on capacity column before commit the changes when creating compartment details for an equipment type.
* BZ: [4531] do not set the focus in text filter when entering the following screens for first time: Tank Configuration, Tank Status, Drawer Product, Generic Product, and Base Product.
* BZ: [4506/4541] The following changes have been done in Load Schedule screen:
		1. Show the fields 'Sold To' and 'Ship To' in header of form when it is a Pre-Order; Hide two fields in header when it is a Pre-Schedule but enable them in compartment grid.
		2. Restrict the fields 'Shift' and 'Priority' to accept '0-9' only
		3. Restrict the fields 'Sold To' and 'Ship To' to accpet 'A-Za-z0-9 _-' only
		4. When enter the value of 'Sold To' and 'Delv To' in compartment grid, any invalid characters not in 'A-Za-z0-9 _-' will be removed and the length will be remained <= 17.
* BZ: [4535] 
		In open order screen (v_OrderListing.mxml), use the separate list for customer filter and customer field in form.
		In the following screens, replace searchCombo with DKI_ComboBox
			v_AllocationPeriod.mxml
			v_Allocations.mxml
			v_DrawerProducts.mxml
			v_OpenOrdersPopup.mxml
			v_OrderPeriod.mxml
			v_ReportConfig.mxml
			v_TankConfiguration.mxml
			v_TankGroup.mxml
			v_TankStatus.mxml
* BZ: [4532] In Equipment Types screen, change "Filter source list by name" to "Search by equipment code" 
* BZ: [4537] In Equipment Types screen, restrict the fields of Equipment Code to accept 'A-Za-z0-9 _-' only 
* BZ: [4526] Hide lock column when creating a new equipment; Enable it when updating an existing equipment.
* BZ: [4536] Do the validation to ComboBox or DropDownList whenever its value of selectedIndex is changed
* BZ: [4538] When click the button Clear in filter bar in Equipment Types screen, 
			1. do not change the selection of major list so its sub screen will not be affected when system is in EDIT mode.
			2. otherwise cancel the selection and reset the major list
* BZ: [4542] the column "Site handles Product Movement Receipts" does not exist in COMPANYS, so hide this field in Company Special Action Dialog		
* BZ: [4553] reload the report company details including its email address after a configuration record was created or updated on Report Configuration screen
* BZ: [4544] 
	The following field allows special characters including single quotation :
		Company Name: Expecting A-Z,a-z,0-9, _-/\\'&[]<>(){}
		Personnel Name: Expecting A-Z,a-z,0-9, _-/\\'&[]<>(){}
		Tanker Name: Expecting A-Z,a-z,0-9, _-/\\'&[]<>(){}
		Equipment List Name: Expecting A-Z,a-z,0-9, _-/\\'&[]<>(){}
	The following field allows special characters without single quotation 
		Tanker Code: Expecting A-Z,a-z,0-9, _-/\\&[]<>(){}
		Equipment Code: Expecting A-Z,a-z,0-9, _-/\\&[]<>(){}
		Drawer Product Name: Expecting A-Z,a-z,0-9, _-/\\&[]<>(){}
		
		
Known Issues:
* BZ: In Load Schedules screen, make button Print for BOL and LOAD_REPORT to call /phpwrapper/bill_of_lading.php instead of /phpwrapper/bill_of_lading_popup.php



********************************************************************************************************************** 
Version: 9.06.01.06
Tag: Omega-9-06-01-06
Date Tagged:[25/09/2015]
********************************************************************************************************************** 

New Features:
* BZ: On Base Products screen, add two new columns to display the number and the list of tanks which stores this base product.
* BZ: On Tank Status screen, move the button Calculate from the bottom to the corner of Update Status form
* BZ: On Tank Group screen, allow the user to add multiple available tanks to a group or remove multiple tanks from a group
* BZ: Use data binding in SQL queries on screen Transaction List
* BZ: Use data binding in SQL queries on screen Role Access Management
* BZ: Make the validation consistent in both create and update form of screen Role Access Management
* BZ: Change the title of ROLE_NOTE from Comments to Description in grid and form on screen Role Access Management



Bug Fixes:
* BZ: On Tank Status screen, enable the validation for certain fields when opening the relevant form for editing, and disable all validation after leaving the form or when it is a view-only form. The field will not be highlighted if it does not require validation [Bug 4438] 
* BZ: Add the wrapper for GET action in Load Meters PHPWARAPPER so it can pick up the DEL command from GUI and perform the deletion [Bug 4454]
* BZ: On Special Movements screen, 
		a. When plant code is null in its company record, use company code instead of name as default plant code, and display "plant - cmpy code - cmpy name" in plant/suppler drop down list. This fix assures that the length of plant/supplier will never exceed the storage limit in Special Movement record therefore the success of creation. [Bug 4459/4460]
		b. Do not force to pick up default product for the tank if the product list has the selection already, so the change of product selection can be saved and displayed correctly. [Bug 4459/4460]
		c. Make deletion journalling can handle the primary key made of multiple columns, so the journalling will not fail and the screen can be refreshed properly after deletion [Bug 4459/4460] 
* BZ: For all stock reconciliation screens, use PHP session to get user details when journalling and only log the values which have been changed [Bug 4444]
* BZ: Use the prompt "Product Code/Product Name Filter" in Drawer Product Filter [Bug 4473]
* BZ: Use JSON to encode/decode the data from AMF PHP services in screen Special Movements and Manual Transactions, so it takes PHP less time to serializing the data for front-end. [Bug 4422]
* BZ: Delete the data loading function in PHP constructors so it won't be processed twice in screen Special Movements and Manual Transactions. [Bug 4422]

* BZ: Don't check the uniqueness of personnel code until user takes focus out of it, and re-check its uniqueness when submitting to create a new personnel on Personnel screen [Bug 4465]
* BZ: Don't check the uniqueness of the Primary Key field until user takes focus out of it, and re-check its uniqueness when submitting to create a record on following screens [Bug 4465&4428&4516]
		Personnel [Bug 4465]
		Base Products
		Drawer Products [Bug 4428]
		Tank Group
		Tank Configuration [Bug 4516]

* BZ: Disable the button Save/Update when it is clicked, and re-enable it when the record was created/updated successfully or process interrupted due to errors on following screens. [Bug 4474&4441]
		Base Products
		Drawer Products
		Generic Products
		Logical Printers
		Physical Printers
		Report Profile
		Report Configuration
		Tank Group
		Tank Configuration
		Tank Status
		Allocations
		Allocation Periods
		Open Orders
		Order Periods
				
* BZ: Get company email address by AMF PHP service in case the ZEND service VO missed it. [Bug 4480&4482]
* BZ: Replace "Content-type: text/html; charset=GB2312\n\n" with blank string before sending html contents to browser in php, so this line won't show in Load Meters Create/Update/Delete actions [Bug 4437]
* BZ: Do not sort the result of Equip Type Composition because the original sql gives correct sequence for combination equipment type already. [Bug 4457]
* BZ: Change duplication warning message to "The equipment type already exists. Please use a different code." [Bug 4486]
* BZ: Add MODULE and PHPWRAPPER for product group screen [Bug 4455]
* BZ: Use data binding in SQL queries on screen Personnel [Bug 4493]
* BZ: Use data binding in SQL queries on screen ID Assignment [Bug 4493]
* BZ: Accept only digits 0-9 in fields of Empty Weight and Pulling Limit  in Equipment List screen [Bug 4508] 
* BZ: Changed the field title from Report Source to Report Name [Bug 4517]
* BZ: On Company Special Action dialog, inform the user that the multiple email addresses are allowed and separated by either ":" or ";". [Bug 4518]
* BZ: On Report Configuration screen, inform the user that the multiple email addresses are allowed and separated by either ":" or ";", and the update of email address will be reflected in all configuration records related to its report company. [Bug 4518]
* BZ: Check the selectedIndex of ComboBox filter, if greater than -1, get the value and do filtering; if not, always treat it as -1 therefore this filter does not take effect. [Bug 4521]
* BZ: SearchCombo option list goes back to original size if value typed does not find match. [Bug 4521]
* BZ: Hide the option 'Undefined' in Base Product Classification List from Base Product screen [Bug 4515]
* MC: [4471] Password length is increased to 40 chars.
* MC: [4467] New Password generation is now following site config.
* MC: [4469] Cosmetic change to password enter field.
* MC: [4232] Password error messages updated.
* MC: [4478] Session limit issues are rectified.
* MC: [4486] Equipment type screen error message fixed.
* MC: [4477] Timeout issue made clear by adding description in site config screen.
* MC: [4492] Product Group screen recovered.
* MC: [4458] Safe fuel screen recovered.
* MC: [4483] Increased interval to be more realistic.

		
		
Known Issues:
* BZ: Use secure channel to get AMF PHP services in Transactions Popup Screen. Fix the process of getting Base Product details in transaction.
* BZ: When adding new bay and arms, trim the spaces in _GET or _POST before sending request to CGI, so the total length of url request string won't exceed the limit.
* BZ: Add the wrapper for GET action in PHPWARAPPER of Arm Additives Deletion (armadditives_mod.php) so it can pick up the DEL command from GUI and perform the deletion 
* BZ: Add the wrapper for GET action in PHPWARAPPER of Arm Additives Modification (edit_additives.php) so it can modify the arm additives 
* BZ: allow input of multiple email address separated by ; or :





********************************************************************************************************************** 
Version: 9.06.01.05
Tag: Omega-9-06-01-05
Date Tagged:[07/08/2015]
********************************************************************************************************************** 
New Features:
* JZ: SQL Injection mitigation(AMFPHP) for Load Schedule Screen.
      Added variable binding SQL execution in getPaged().
* MC: Password reset, and change password is now using a secure function.
* BZ: Changed "Enabled" and "Active" to more meaningful text in Report Configuration screen
* BZ: Added two checkboxes to manage printing and emailing of company report, also a text field for email address in Report Configuration screen
* BZ: Allow user to enter single quotation for personnel name in Personnel screen
* BZ: Convert Tank Group screen from ML version to AMF-PHP based version
* BZ: When returning from popup allocation periods screen, locate the parent allocation and re-open its edit form
* BZ: Changed the following FLEX-AMFPHP-based screens with data-binding query services:
         Allocations and Allocation Periods 
         Drawer Products and Generic Product 
         Tank Configuration   
         Tank Status 
         Order Listing and Order Periods
         Physical Printer
* BZ: Convert Base Product screen from ML version to AMF-PHP based version

	  

Bug Fixes:
* BZ: Replace CURL with PHP file_get_contents to access CGI files. The screens affected include:
         Allocations and Allocation Periods [Bug 4413]
         Drawer Products and Generic Product [Bug 4410]
         Tank Configuration [Bug 4414]  
         Tank Status [Bug 4414]
         Report Profile [Bug 4416]
         Report Config [Bug 4415]
         Order Listing [similar as Bug 4413]
         Logical Printer [Bug 4408]
         Physical Printer [same as Bug 4408]

* BZ: The button label has been changed to Calculate in Update Status form of Tank Status screen [Bug 4426]
* BZ: Start filtering when user has pressed Enter key in a textinput filter on Drawer Products screen, and the focus will stay in it after filtering done [Bug 4427]
* BZ: Don't check the uniqueness of drawer product code until user takes focus out of it, and re-check its uniqueness when submitting to create a new drawer product on Drawer Products screen [Bug 4428]
* BZ: Start filtering when user has pressed Enter key in a textinput filter on Tank Configuration screen, and the focus will stay in it after filtering done [Bug 4430]
* BZ: Start filtering when user has pressed Enter key in a textinput filter on Tank Status screen, and the focus will stay in it after filtering done [Bug 4430]
* SAO: Density range had been updated for product class ethanol/water to 900-1000 kg/m3, so the calculation of its volume will have correct results [Bug 4431]
* BZ: Disable the dropdown list components for three printers, and enable them after the components have been populated and ready to use on Company Special Action dialog box.[Bug 4407]
* BZ: In update form of personnel screen, the personnel status will remain same if no changes are done to Radio group buttons  [Bug 4447]


Known Issues:
* BZ: In tank screen, the fields of Daily Variance Limit (Vol), Daily Variance Limit (%), Monthly Variance Limit (Vol), Monthly Variance Limit (%) 
      will not require validation if they are blank.
* BZ: In tank status screen, the following changes are made:
         1. Grey the non-editable label field
         2. Change of any quantity field (amb vol, cor vol, kg) will make that field the source of calculation.
         3. Change of density or temperature field will re-mark the source of calculation in the sequence of amb, cor and kg. The first non-blank field will become the source
         4. Button Update Volume will be enabled when density field, temp field, and one of quantity fields (amb, cor, or kg) are not blank.
         5. Button Update is always enabled now. 
 * BZ: Fix the bug in views related to allocation and allocation items - missing link between allocation product and drawer product
         




********************************************************************************************************************** 
Version: 9.06.01.04
Tag: Omega-9-06-01-04
Date Tagged:[07/08/2015]
********************************************************************************************************************** 
New Features:
* MC: wrapped CGI functions (bill_of_lading_popup, calcvcf, drv_instr, drv_instr_popup, jasper_reports,
			 load_spec_cancel, order_period, pds)
* MC/CW: wrapped ML Screen (ADDRESS, CUSTOMER CATEGORIES, CUSTOMER PRICING, CUSTOMERS, GATECONTROL,GATE PERMISSION)

* MC: Added M_Physical_Printer list back to code after accidental deletion.
* MC: Added M_Logical_Printer list back to code after accidental deletion.

* BZ/MC: eliminate the usage of global.sessionID in all FLEX screens and stop sending it to the back-end;
         replace CGI session id with PHP session ID in all PHP files which call CGI to create/update/delete records; 
		 affected screens include all FLEX screens in all modules except the module for "Stock Reconcilliation"
* BZ/JZ: change the bootstrip.php, DB.class.php and Global.class.php in both ZEND and AMF php services to 
         make the generic functions can be used by both data-binding and none-binding screens;
		 None-binding screen will pass the SQL or filter as a String; Data-binding screen will pass the SQL or filter as 
         an array containing two elements: ["sql_text"] as SQL base text and ["sql_data"] as a parameter array for binding.	
         The screens haven't been changed to data binding should not be affected.
		 The screens changed to data binding include: 
		         Load Schedules (partially changed by jack), 
				 Tankers, 
				 Equipment List, 
				 Equipment Types,
				 Report Profile,
				 Report Configuration,
				 Logical Printer
* BZ: eliminate the passing of the filter as SQL strtexting from FLEX screens to back-end. 
      the affected screens include: Company, Personnel, Equipment Type
* BZ: eliminate the usage of setacctstat.cgi in Personnel screen, and replace its functionality with PHP functions when personnel updated.
* BZ: use TankService.calculateTankVolumes to calculate the tank volumes in Tank Status screen; 
      change of the value of any amb vol, cor vol, kg, density, or temperature will cause the recalculation of volumes and kg.
* BZ: add measurement units to volume, density fields in Tank Configuration screen.
* BZ: change the title from Safefill to Capacity in compartment form/grid in Equipment Types (as required by Aida)
* BZ: stop journalling in Front-end and do it in PHP. 
      affected screens include: Company Special Actions popup, Base products, Company, Identification Assignment, Month End, Role Access Management, Site Configuration
		 
Bug Fixes:
*[4409] - MC: Priority/Shift states fixed.
*[4391] - MC: Added M_Transaction list back to code after accidental deletion.
* JZ: SQL Injection mitigation(PHP) for Load Schedule Screen.
      (Added auto binding varibles when executing SQL queries in both AMF PHP services and Zend PHP services.)

Known Issue:
*** MC: Reset Password, create new personel have security holes.
*** MC: Reset Password, create new personel not working, required CGI update from CW
*** MC: ~2 - direct CGI calls need to be wrapped.
*** MC: ~3 usage of session ID need to refer to sessions instead.

********************************************************************************************************************** 
Version: 9.06.01.03
Tag: Omega-9-06-01-03
Date Tagged: [23/07/2015]
**********************************************************************************************************************
New Features:
* MC/CW: All Omega Lite ML scren now wrapped in PHP (AREA, EXPIRY DATES, HAZCHEM, LOADBAYS, 
               MEETERING, PRODUCT INVENTORY, TRANSACTION LIST, TANK INVENTORY, TIME CODES)
* MC: Personnel reset UI text updated for user friendlines (Aida).
* MC: Title of modules are now clickable.
* MC: Home screen enhanced.
* BZ: Tank Status, Tank Configuration and Repo Config are now converted to flex.
* BZ: Drawer product enhancements.
* BZ: Report Profile enhancements.
* MC: Journal Filtering Options now should work as per user expectation, fix merged from emhk - refer swee.
* MC: Enhance login screen to set default button correctly

Bug Fixes:
*[4401] - MC: Folio Summary Screen not responding issue Fixed.
*[4396] - Mc: Omega5000 Automatic Session Logout fix for -1 input on autologin.
*[4392] - MC: Unable to Create Manual Transaction #1: unable to load, error 500 Fixed. There might be more errors.
*[4391] - MC: Transaction details view enhancements.
*[4389, 4395] - MC: Companies Special Actions Screen not responding issue Fixed.
*[4365, 4393] - MC: Load Schedule shift and priority view unable to enter data fixed.
*[4386] - MC: Identification Assignment created but "Creation failed" message appears Fixed.
*[4398] - MC: Transaction ID on home widget removed for now pending update to user story.
*[4397] - MC: Totals now in Home widget.

Known Issue:
*** Reset Password, create new personel have security holes.
*** ~110+ direct CGI calls need to be wrapped.
*** ~200+ usage of session ID need to refer to sessions instead.


********************************************************************************************************************** 
Version: 9.06.01.02
Tag: Omega-9-06-01-02
Date Tagged: ?
**********************************************************************************************************************
Some more back tracking work Required
New Features:
* BZ: Drawer Products and Report Profile Screens are now converted to flex.
* BZ: Allocations screen enhancements.

Bug Fixes:
*[4379] - MC: Unable to login issue Fixed.
*[4368] - MC: OmegaLITE Frontend stuck Fixed.
*[4367] - MC: Unable to save New Equipment List in OmegaLITE Fixed.
*[4366] - MC: Unable to save New Equipment Types in OmegaLITE Fixed.
