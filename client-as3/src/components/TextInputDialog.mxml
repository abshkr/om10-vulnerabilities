<?xml version="1.0" encoding="utf-8"?>
<s:Panel skinClass="skins.WidgetPanelSkin"
		 xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/mx" 
		 xmlns:components="components.*" 
		 width="400" height="180" title="Card Reader Dialog">
	<s:layout>
		<s:VerticalLayout paddingLeft="5" paddingRight="5" paddingTop="5" paddingBottom="5"/>
	</s:layout>
	<fx:Script>
		<![CDATA[
			import mx.core.FlexGlobals;
			import mx.events.FlexEvent;
			import mx.managers.PopUpManager;
			
			import spark.events.TextOperationEvent;
			
			[Bindable] public var msg:String;
			[Bindable] public var txt:String;
			[Bindable] public var field_visible:Boolean=true;
			[Bindable] public var text_hidden:Boolean=false;
			[Bindable] public var text_uppercase:Boolean=true;
			
			public var callBack:Function;
			
			protected function dki_button1_clickHandler(event:MouseEvent):void
			{
				PopUpManager.removePopUp(this);				
			}
			
			protected function dki_button2_clickHandler(event:MouseEvent):void
			{
				PopUpManager.removePopUp(this);	
				callBack(card_txt.text);
			}
			
			protected function card_txt_changeHandler(event:TextOperationEvent):void
			{
				if ( this.text_uppercase == true )
				{
					card_txt.text = card_txt.text.toUpperCase();
				}
			}
			
		]]>
	</fx:Script>
	<s:HGroup width="100%" height="120">
		<s:Image id="img" source="assets/cgi/m_IDAssignment.png" width="100" height="100" visible="{field_visible}"/>
		<s:VGroup width="100%" height="100%" paddingTop="15">
			<s:Label width="100%" fontFamily="Arial" fontSize="13" fontWeight="bold"
					 lineBreak="toFit" text="{msg}" textAlign="left"/>
			<s:TextInput id="card_txt" width="100%" fontFamily="Arial" fontSize="13" fontWeight="bold" text="{txt}" change="card_txt_changeHandler(event)" displayAsPassword="{text_hidden}"/>
		</s:VGroup>
	</s:HGroup>
	<s:Spacer height="100%"/>
	<s:HGroup width="100%">
		<s:Spacer width="100%" />
		<components:DKI_Button label="{resourceManager.getString('default','OK')}" type="save" click="dki_button2_clickHandler(event)"/>
		<components:DKI_Button id="cancel_btn" visible="{field_visible}" label="{resourceManager.getString('default','CANCEL')}" type="cancel" click="dki_button1_clickHandler(event)"/>
	</s:HGroup>
</s:Panel>

