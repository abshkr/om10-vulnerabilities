<?xml version="1.0" encoding="utf-8"?>
<s:HGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
				   xmlns:s="library://ns.adobe.com/flex/spark" 
				   xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="75"
				   xmlns:components="components.*" 
				   creationComplete="bordercontainer1_creationCompleteHandler(event)">

	<fx:Script>
		<![CDATA[
			import mx.controls.Alert;
			import mx.core.FlexGlobals;
			import mx.events.CloseEvent;
			import mx.events.FlexEvent;
			import mx.managers.PopUpManager;
			
			import spark.events.IndexChangeEvent;

			private var win:UserProfile = new UserProfile();

			protected function menuSelector_changeHandler(event:IndexChangeEvent):void
			{
				global.menuArray = global.Navigator[event.newIndex].navbar;
				global.indexPos = 0;
				//global.menuArray.refresh();
				dispatchEvent(new Event('resetScroll',true,false));
			}
			
			protected function logout_clickHandler(event:MouseEvent):void
			{
				navigateToURL(new URLRequest('index.html'),'_self');
			}
			
			protected function Language_clickHandler(lang:String='ENG'):void
			{
				if (lang == 'CHN') 
				{
					resourceManager.localeChain = ['zh_CN'];
				}
				if (lang == 'ENG')	
				{
					resourceManager.localeChain = ['en_US'];
				}
				global.menuArray.refresh();
				global.indexPos = 0;
				dispatchEvent(new Event('resetScroll',true,false));
			}			
						
			protected function bordercontainer1_creationCompleteHandler(event:FlexEvent):void
			{
				//langList.addEventListener('setLanguage',setLanguage);
				
			}
			
			protected function setLanguage(event:TextEvent):void
			{
				Language_clickHandler(event.text);
			}
			
			protected function profile_clickHandler(event:MouseEvent):void
			{
				win.addEventListener(CloseEvent.CLOSE,closePopUp);
				PopUpManager.addPopUp(win,FlexGlobals.topLevelApplication.widgetList,true);
				PopUpManager.centerPopUp(win);
			}
			
			protected function closePopUp(event:CloseEvent):void
			{
				PopUpManager.removePopUp(win);
				
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<s:GlowFilter id="inner" inner="true" color="0x333333" strength="1.5" blurX="0" blurY="{height*0.9}"/>
	</fx:Declarations>
	<!--<s:Rect left="0" right="0" height="100%" alpha="0.25" filters="{inner}">
		<s:fill>
			<s:SolidColor color="0xFFFFFF"/>
		</s:fill>
	</s:Rect>
	<s:Rect left="1" right="1" top="1" height="100%" filters="{inner}">
		<s:stroke>
			<s:SolidColorStroke color="0x00000"/>
		</s:stroke>
	</s:Rect>--> 	
	<s:Group width="100%" height="100%">
		<s:Image left="8" top="-2" width="72" height="70" fillMode="scale" source="@Embed('/assets/logo3d.png')"/>
		<s:List id="menuSelector" height="100%" borderAlpha="0" dataProvider="{global.Navigator}" top="0" horizontalCenter="0" selectedIndex="0" 
				contentBackgroundAlpha="0" change="menuSelector_changeHandler(event)" itemRenderer="renderers.MenuBarRender">
			<s:layout>
				<s:HorizontalLayout gap="16"/>
			</s:layout>	
		</s:List>
		<!--<s:HGroup height="100%" paddingTop="6" paddingLeft="4" paddingRight="4" paddingBottom="4" gap="2" buttonMode="true" 
				  mouseEnabledWhereTransparent="true" click="profile_clickHandler(event)">
			<s:Image width="32" height="27" scaleMode="stretch"
					 source="@Embed('/assets/m_Customers.png')"/>
			<s:Label width="41" height="100%" text="User Profile" textAlign="center"
					 verticalAlign="middle"/>
		</s:HGroup>-->
		<!--<components:LanguageList id="langList" dataProvider="{global.Languages}" visible="false"/>-->
		<!--<s:Group width="32" height="100%">
			<s:Image source="@Embed('/assets/logoff.png')"  buttonMode="true" fillMode="scale" 
					 width="26" height="26" click="logout_clickHandler(event)" verticalCenter="0" horizontalCenter="0"/>
		</s:Group>-->
	</s:Group>

</s:HGroup>
