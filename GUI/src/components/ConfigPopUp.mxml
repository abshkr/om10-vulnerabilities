<?xml version="1.0" encoding="utf-8"?>
<s:Panel xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" show="onShow(event)"
		 cornerRadius="6" dropShadowVisible="true" skinClass="skins.FrameSkin">
	<fx:Script>
		<![CDATA[
			import events.ObjEvent;
			
			import modules.M_SECURITY_CONFIG;
			
			import mx.core.IVisualElement;
			import mx.events.FlexEvent;
			import mx.events.ModuleEvent;
			import mx.modules.IModuleInfo;
			import mx.modules.ModuleManager;
			
			private var currModule:IModuleInfo;
			
			public var iChild:*;
			
			public function loadModule(value:Object): void
			{
				ldr.url = null;
				title = value[0];	
				ldr.url=value[1];
				
				//currModule = ModuleManager.getModule(value[1]);
				//currModule.addEventListener(ModuleEvent.READY, moduleReadyHandler)
				//currModule.load(null,null,null,moduleFactory);
			}
			
			private function moduleReadyHandler(evt:ModuleEvent):void
			{
				//iChild.setSecurity(security.priv_view,security.priv_update,security.priv_create,security.priv_delete,security.priv_password);
				//base.setState('normal');
				//currModule.removeEventListener(ModuleEvent.READY, moduleReadyHandler);
			}
			
				
			protected function onShow(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
				iChild = ldr.child as IModuleInterface;
				if(iChild){
					iChild.setState("updatePlease");	
				}
				
				
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<s:ModuleLoader id="ldr" minWidth="650" minHeight="500" ready="moduleReadyHandler(event)"  preinitialize="ldr.applicationDomain=ApplicationDomain.currentDomain"/>
</s:Panel>
