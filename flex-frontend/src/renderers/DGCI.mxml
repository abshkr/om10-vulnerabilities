<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
					xmlns:s="library://ns.adobe.com/flex/spark" 
					xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true" xmlns:dm="dm.*">

	
	<fx:Script>
		<![CDATA[
			import dm.DM;
			import dm.models.dmMessagingIn;
			
			import mx.controls.Alert;
			import mx.events.CollectionEvent;
			import mx.utils.ObjectUtil;
			
			import renderers.PopupIgnoreDescription;
			
			private var popupWindow:PopupIgnoreDescription = new PopupIgnoreDescription();
			
			protected function updateIgnore(event:MouseEvent):void
			{
				
				var s:dmMessagingIn = data as dmMessagingIn;
				popupWindow.doPopUp(doUpdate);
				popupWindow.PopupIgnoreWindow.text = s.DESCRIPTION; 
				popupWindow.PopupIgnoreWindow.setFocus();
				
			}

			private function doUpdate(descStr:String): void
			{
				if(descStr==null){dispatchEvent(new Event("refreshIgnore",true));return;}
				
				var s:dmMessagingIn = data as dmMessagingIn;
				
				s.update({
					payload:{
						IGNORE_FLAG:cb1.selected?1:0,
						DESCRIPTION:descStr
						
						
					},
					onSuccess:onSuccess});
				
			}
			
			public function onSuccess(o:Object = null):void{
				
				var s:dmMessagingIn = data as dmMessagingIn;
				s.IGNORE_FLAG = cb1.selected?1:0;
				s.payload.IGNORE_FLAG = cb1.selected?1:0;
				s.DESCRIPTION = popupWindow.PopupIgnoreWindow.text;
				s.payload.DESCRIPTION = popupWindow.PopupIgnoreWindow.text;
				dispatchEvent(new Event("refreshIgnore",true));
			}
			
		]]>
	</fx:Script>
	
	<s:CheckBox id="cb1" width="100%" height="100%" skinClass="skins.RoleCheckSkin" selected="{data['IGNORE_FLAG']==1}" enabled="{data['OM_STATUS']!='Successful'}" click="updateIgnore(event)" />
	

</s:GridItemRenderer>
