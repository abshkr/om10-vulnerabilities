<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark"
		  xmlns:siteconfigservice="services.siteconfigservice.*"
		  xmlns:components="components.*"
		  xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%"
		  creationComplete="vgroup1_creationCompleteHandler(event)">
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			import mx.rpc.AsyncToken;
			import mx.rpc.events.ResultEvent;
			
			import renderers.SecurityConfigRenderer;
			
			import spark.components.DataGroup;
			
			[Bindable] public var readOnly:Boolean = false;
			[Bindable] public var canUpdate:Boolean = false;
			[Bindable] public var canCreate:Boolean = false;
			[Bindable] public var canDelete:Boolean = false;
			[Bindable] public var hasPassword:Boolean = false;
			
			protected function vgroup1_creationCompleteHandler(event:FlexEvent):void
			{
				getSiteConfigService.token = siteConfigService.getAllConfigSettingsRequiredByGUI("'D'");
			}
			
			
			protected function updateSiteConfigService_resultHandler(event:ResultEvent):void
			{
				if (event.result == "Success")
					global.msgSuccess(global.UpdateSuccess)
				else
					global.msgFail(global.UpdateError);
			}
			
			protected function getSiteConfigService_resultHandler(event:ResultEvent):void
			{
				if(getSiteConfigService.lastResult[0].config_value=="Y") toggle.selected=false else toggle.selected=true;
			}
			
			protected function dki_button1_clickHandler(event:MouseEvent):void
			{
				var setToggle:String="Y";
				if (toggle.selected) setToggle="N";
				var o:Object = new Object();
				o.config_key = 'HOST_COMM_MNTH_END';
				o.config_value=setToggle;
				updateSiteConfigService.token = siteConfigService.update(o);
			}
			
	
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<siteconfigservice:SiteConfigService id="siteConfigService"  channelSet="{global.channelSet}"/>
		<s:CallResponder id="getSiteConfigService" result="getSiteConfigService_resultHandler(event)"/>
		<s:CallResponder id="updateSiteConfigService" result="updateSiteConfigService_resultHandler(event)"/>
	</fx:Declarations>
	<s:Panel id="panel" width="100%" height="100%"
			 skinClass="skins.NullSkin" title="Month End">
		<s:layout>
			<s:VerticalLayout/>
		</s:layout>
		<s:Spacer height="10"/>
		
		
		<components:DKI_ToggleSwitch id="toggle" selectedLabel="Yes" deselectedLabel="No" width="60" label="Send host comms message"  click="dki_button1_clickHandler(null)" enabled="{global.specialUpdate}"/>
		
		<!--<components:DKI_ToggleSwitch id="toggle" selectedLabel="Yes" deselectedLabel="No" width="60" label="Send host comms message"/>
		<s:Spacer height="100%"/>
		<s:HGroup width="100%">
			<s:Spacer width="100%"/>
			<components:DKI_Button label="Update" type="save" click="dki_button1_clickHandler(event)" enabled="{global.specialUpdate}"/>
		</s:HGroup>
		-->
	</s:Panel>
</s:VGroup>
